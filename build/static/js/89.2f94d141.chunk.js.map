{"version":3,"sources":["screens/Products/edit.js"],"names":["Edit","id","useParams","React","useContext","userContext","user","setLoad","useState","name","setName","allcategories","setAllCategories","currentCategory","setCurrentCategory","type","setType","unit","setUnit","sales_unit","setSalesUnit","pack_unit","setPackUnit","price","setPrice","hsbn","setHSBN","serial_no","setSerialNo","useEffect","a","fetch","url","method","headers","token","response","ok","json","data","status","category_list","map","item","value","label","toast","error","message","product_detail","category_id","category_name","fetchCategory","fetchProductData","className","onSubmit","e","preventDefault","submitData","body","formData","window","location","origin","FormData","append","handleSubmit","class","for","onChange","target","required","options"],"mappings":"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","file":"static/js/89.2f94d141.chunk.js","sourcesContent":["import React from 'react';\nimport Select from 'react-select';\nimport { url } from 'src/helpers/helpers';\nimport {userContext} from '../../context/UserContext'\nimport { toast,ToastContainer } from 'react-toastify';\nimport {useParams} from 'react-router-dom';\n\nexport default function Edit() {\n    \n    const {id} = useParams();\n    const {user,setLoad} = React.useContext(userContext);\n    const [name,setName] = React.useState('');\n    const [allcategories, setAllCategories] = React.useState([]);\n    const [currentCategory, setCurrentCategory] = React.useState('');\n    const [type, setType] = React.useState('');\n    const [unit, setUnit] = React.useState('');\n    const [sales_unit, setSalesUnit] = React.useState(1);\n    const [pack_unit, setPackUnit]  = React.useState(1);\n    const [price,setPrice] = React.useState(0);\n    const [hsbn,setHSBN] = React.useState('');\n    const [serial_no,setSerialNo] = React.useState('');\n    \n    React.useEffect(()=>{\n        async function fetchCategory(){\n            setLoad(true);\n            const response = await fetch(url + 'categorylist', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n            if(response.ok === true) {\n                const data = await response.json();\n                setLoad(false)\n                if (data.status === 200) {\n                    setAllCategories(data?.category_list.map(item => {\n                        return {\n                            value: item.id,\n                            label: item.name\n                        }\n                    }))\n                } else {\n                    toast.error(data.message)\n                }\n            }\n        }\n        fetchCategory();\n        \n        async function fetchProductData(){\n                setLoad(true);\n                const response = await fetch(url + 'productById/' + id,{\n                method : 'GET',\n                headers : {\n                    'Authorization' : user?.token\n                }\n            })\n\n            if (response.ok === true){\n                setLoad(false);\n                const data = await response.json();\n                if (data.status === 200){\n                    let product_detail = data.product_detail;\n                    setName(product_detail.name);\n                    setPrice(product_detail.price);\n                    setCurrentCategory({\n                        value: product_detail.category_id,\n                        label: product_detail.category_name\n                    });\n                    setHSBN(product_detail.hsbn);\n                    setSerialNo(product_detail.serial_no);\n                    setType(product_detail.type);\n                    setUnit(product_detail.unit);\n                    setSalesUnit(product_detail.sales_unit);\n                    setPackUnit(product_detail.pack_unit);\n                }else{\n                    toast.error(data.message);\n                }\n            }\n        }\n        fetchProductData();\n    },[])\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        if(name && price && currentCategory && unit)\n        {  setLoad(true);\n        const formData = new FormData();\n        formData.append('name',name);\n        formData.append('price',price);\n        formData.append('unit',unit);\n        formData.append('type', type);\n        formData.append('hsbn',hsbn);\n        formData.append('serial_no',serial_no);\n        formData.append('category_id',currentCategory.value);\n        formData.append('category_name',currentCategory.label);\n        formData.append('sales_unit',sales_unit);\n        formData.append('pack_unit', pack_unit);\n\n        async function submitData(){\n            const response = await fetch(url + 'updateproduct/' + id,{\n                method : 'POST',\n                headers : {\n                    'Authorization' : user?.token\n                },\n                body : formData\n            })\n            if (response.ok === true){\n                setLoad(false);\n                const data = await response.json();\n                if (data.status === 200){\n                    return window.location = window.location.origin + '/#/productList'\n                }else{\n                    toast.error(data.message);\n                }\n            }\n        }\n        submitData();\n    }else{\n        toast.error('Please fill the data with *');    \n    }\n    }\n    return (\n        <div className=\"container create-page-main-section\">\n            <ToastContainer />\n            <form onSubmit={e=>handleSubmit(e)}>\n                <div className='p-sm-5 create-form-field'>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Name:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={name} onChange={e=>setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" required/>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Category:<span className='required-label'>*</span></label>    \n                        <div class=\"col-sm-10\">\n                        <Select options={allcategories} value={currentCategory} onChange={setCurrentCategory} required/>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Type:<span className='required-label'>*</span></label>    \n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <select value={type} onChange={e => setType(e.target.value)} class=\"form-control\" required>\n                            <option value=\"\">Select Type</option>\n                            <option value='product'>Product</option>\n                            <option value='service'>Service</option>\n                        </select>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Unit:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <select value={unit} onChange={e => setUnit(e.target.value)} class=\"form-control\" required>\n                            <option value=\"\">Select Unit</option>\n                            <option value='Sq.Ft'>Sq.Ft</option>\n                            <option value='Pcs'>Pcs</option>\n                            <option value='Kg'>Kg</option>\n                            <option value='Nos'>Nos</option>\n                            <option value='Gms'>Gms</option>\n                            <option value='Litre'>Litre</option>\n                        </select>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Price:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input required value={price} onChange={e=>setPrice(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">HSN:</label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={hsbn} onChange={e=>setHSBN(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Serial No:</label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={serial_no} onChange={e=>setSerialNo(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>                   \n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Sales Unit:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input required value={sales_unit} onChange={e=>setSalesUnit(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                    <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Pack Unit:<span className='required-label'>*</span></label>\n                    <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <input required value={pack_unit} onChange={e=>setPackUnit(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                    </div>\n                    </div>\n                </div>\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\">Cancel<i\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\n                </div>\n            </form>\n        </div>\n    )\n}\n"],"sourceRoot":""}