(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[33],{689:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(661),r=(n(1),n(18));function o(e){var t=e.header,n=e.Label,o=e.showModal,c=e.setShowModal,s=e.adjustAmount,u=e.setAdjustAmount,i=e.submitAdjust;return Object(r.jsx)("div",{className:"delete_modal_box",children:Object(r.jsxs)(a.eb,{show:o,onClose:c,children:[Object(r.jsx)(a.hb,{closeButton:!0,children:t}),Object(r.jsxs)(a.fb,{className:"delete_modal_body",children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"",children:n}),Object(r.jsx)("input",{type:"text",value:s,onChange:function(e){return u(e.target.value)},className:"form-control"})]})})}),Object(r.jsx)("button",{type:"submit",onClick:function(){return i()},className:"col-12 btn btn-secondary mb-5",children:"Submit"})]})]})})}},856:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var a=n(664),r=n(128),o=n(665),c=n.n(o),s=n(1),u=n.n(s),i=n(672),l=n.n(i),d=n(670),p=n(663),h=n(667),b=n(100),f=n(689),m=n(18);function j(){var e=u.a.useState(null),t=Object(r.a)(e,2),n=t[0],o=t[1],i=u.a.useState(!1),j=Object(r.a)(i,2),_=j[0],v=j[1],x=u.a.useContext(b.b),y=x.user,w=x.setLoad,O=u.a.useState([]),k=Object(r.a)(O,2),g=k[0],A=k[1],S=u.a.useState(0),N=Object(r.a)(S,2),I=N[0],z=N[1],q=u.a.useState(0),C=Object(r.a)(q,2),E=C[0],T=C[1],G=u.a.useState([]),P=Object(r.a)(G,2),R=P[0],F=P[1],M=u.a.useState(""),J=Object(r.a)(M,2),L=J[0],D=J[1],Q=u.a.useState([]),W=Object(r.a)(Q,2),B=W[0],H=W[1],K=u.a.useState(""),U=Object(r.a)(K,2),V=U[0],X=U[1];u.a.useEffect((function(){function e(){return(e=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch(p.c+"warehouselist",{method:"GET",headers:{Authorization:null===y||void 0===y?void 0:y.token}});case 3:if(!0!==(t=e.sent).ok){e.next=10;break}return e.next=7,t.json();case 7:n=e.sent,w(!1),200===n.status?F(null===n||void 0===n?void 0:n.warehouse_list.map((function(e){return{value:e.id,label:e.name}}))):h.b.error(n.message);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(a.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch(p.c+"fetchInventoryProducts",{method:"GET",headers:{Authorization:null===y||void 0===y?void 0:y.token}});case 3:if(!0!==(t=e.sent).ok){e.next=10;break}return e.next=7,t.json();case 7:n=e.sent,w(!1),200===n.status?H(null===n||void 0===n||null===(a=n.product_list)||void 0===a?void 0:a.map((function(e){return{value:e.product_id,label:e.product_name}}))):h.b.error(n.message);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.c+"fetchInventoryReport",{method:"GET",headers:{Authorization:null===y||void 0===y?void 0:y.token}});case 2:if(!0!==(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:n=e.sent,w(!1),200===n.status&&(A(n.list.map((function(e,t){return{"#":t+1,id:e.id,product_name:e.product_name,warehouse_name:e.warehouse_name,sale_unit_price:e.sale_unit_price,total_qty:e.total_qty}}))),T(parseInt(n.total_records)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w(!0),function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),function(){n.apply(this,arguments)}()}),[]);var Y=[{key:"#",text:"#",className:"#",sortable:!1},{key:"product_name",text:"Product",className:"product_name",sortable:!0},{key:"warehouse_name",text:"Warehouse",className:"warehouse_name",sortable:!0},{key:"sale_unit_price",text:"Price",className:"sale_unit_price",sortable:!0},{key:"total_qty",text:"Available Qty",className:"total_qty",sortable:!0},{key:"action",text:"Action",className:"action",width:100,sortable:!1,cell:function(e){return Object(m.jsx)(s.Fragment,{children:Object(m.jsx)("i",{style:{cursor:"pointer"},onClick:function(){return function(e){o(e),v(!0)}(e.id)},class:"fa fa-pencil mr-1","aria-hidden":"true"})})}}];function Z(){return(Z=Object(a.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch(p.c+t,{method:"GET",headers:{Authorization:null===y||void 0===y?void 0:y.token}});case 3:if(!0!==(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:a=e.sent,w(!1),200===a.status?(A(a.list.map((function(e,t){return{"#":t+1,id:e.id,product_name:e.product_name,warehouse_name:e.warehouse_name,sale_unit_price:e.sale_unit_price,total_qty:e.total_qty}}))),T(parseInt(a.total_records))):h.b.error(a.message);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(e){var t="";L&&V?t="&product=".concat(V.label,"&warehouse=").concat(L.label):L?t="&warehouse=".concat(L.label):V&&(t="&product=".concat(V.label));var n="fetchInventoryReport?page_number=".concat(e.page_number,"&page_size=").concat(e.page_size,"&filter_value=").concat(e.filter_value).concat(t);if(e.sort_order){var a=JSON.stringify(e.sort_order);n="fetchInventoryReport?page_number=".concat(e.page_number,"&page_size=").concat(e.page_size,"&filter_value=").concat(e.filter_value,"&sort_order=").concat(a).concat(t)}!function(e){Z.apply(this,arguments)}(n)};return Object(m.jsxs)("section",{children:[Object(m.jsx)(h.a,{}),Object(m.jsx)(f.a,{header:"Adjust Inventory",Label:"New Quantity",showModal:_,setShowModal:v,adjutAmount:I,setAdjustAmount:z,submitAdjust:function(){w(!0);var e=new FormData;function t(){return t=Object(a.a)(c.a.mark((function t(){var r,s,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(p.c+"updateInventory/"+n,{method:"POST",headers:{Authorization:y.token},body:e});case 2:if(!0!==(r=t.sent).ok){t.next=9;break}return t.next=6,r.json();case 6:s=t.sent,w(!1),200===s.status?(u=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.c+"fetchInventoryReport",{method:"GET",headers:{Authorization:null===y||void 0===y?void 0:y.token}});case 2:if(!0!==(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:200===(n=e.sent).status?(A(n.list.map((function(e,t){return{"#":t+1,id:e.id,product_name:e.product_name,warehouse_name:e.warehouse_name,sale_unit_price:e.sale_unit_price,total_qty:e.total_qty}}))),T(parseInt(n.total_records))):h.b.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o(""),z(""),v(!1),u()):h.b.error(s.message);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}e.append("new_qty",I),function(){t.apply(this,arguments)}()}}),Object(m.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t="";function n(){return(n=Object(a.a)(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.c+"fetchInventoryReport?".concat(t),{method:"GET",headers:{Authorization:null===y||void 0===y?void 0:y.token}});case 2:if(!0!==(n=e.sent).ok){e.next=11;break}return e.next=6,n.json();case 6:a=e.sent,w(!1),200===a.status?(A(a.list.map((function(e,t){return{"#":t+1,id:e.id,product_name:e.product_name,warehouse_name:e.warehouse_name,sale_unit_price:e.sale_unit_price,total_qty:e.total_qty}}))),T(parseInt(a.total_records))):h.b.error(a.message),e.next=12;break;case 11:h.b.error("Oops something went wrong!");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}L&&V?t="product=".concat(V.label,"&warehouse=").concat(L.label):L?t="warehouse=".concat(L.label):V&&(t="product=".concat(V.label)),w(!0),function(){return n.apply(this,arguments)}().catch((function(e){return h.b.error("Internal server error!. Please try again later")}))}(e)},children:Object(m.jsxs)("div",{class:"form-row create-purchase-header",children:[Object(m.jsxs)("div",{class:"form-group col-md-3",children:[Object(m.jsx)("label",{for:"date",children:"Warehouse"}),Object(m.jsx)(d.a,{options:R,value:L,onChange:D})]}),Object(m.jsxs)("div",{class:"form-group col-md-3",children:[Object(m.jsx)("label",{for:"date",children:"Product"}),Object(m.jsx)(d.a,{options:B,value:V,onChange:X})]}),Object(m.jsx)("div",{class:"form-group col-md-3",children:Object(m.jsx)("button",{type:"Submit",class:"font-weight-bold my-4 py-2 px-4 btn btn-success",children:"Filter"})})]})}),Object(m.jsx)(l.a,{config:{page_size:10,length_menu:[10,20,50],button:{excel:!1,print:!1,extra:!1}},records:g,columns:Y,total_record:E,onChange:function(e){return $(e)},dynamic:!0})]})}}}]);
//# sourceMappingURL=33.5ac6e2e2.chunk.js.map