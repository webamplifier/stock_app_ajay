{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import{url}from'src/helpers/helpers';import{toast,ToastContainer}from'react-toastify';import{userContext}from'../../context/UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DayWiseProfit(){var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),expense=_React$useState2[0],setExpense=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),sale=_React$useState4[0],setSale=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),purchase=_React$useState6[0],setPurchase=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),to=_React$useState8[0],setTo=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),from=_React$useState10[0],setFrom=_React$useState10[1];React.useEffect(function(){setLoad(true);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url+'get-total-profile-record',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context.sent;if(!(response.ok===true)){_context.next=9;break;}_context.next=6;return response.json();case 6:data=_context.sent;setLoad(false);if(data.status===200){setExpense(data.expense_record);setPurchase(data.purchase_record);setSale(data.sales_record);}else{toast.error(data.message);}case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function handleSubmit(){if(to&&from){var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(url+'get-profit-data',{method:'POST',headers:{'Authorization':user===null||user===void 0?void 0:user.token},body:formData});case 2:response=_context2.sent;if(!(response.ok===true)){_context2.next=11;break;}_context2.next=6;return response.json();case 6:data=_context2.sent;setLoad(false);if(data.status==200){setExpense(data.expense_record);setPurchase(data.purchase_record);setSale(data.sales_record);}else{toast.error(data.message);}_context2.next=12;break;case 11:toast.error('Oops something went wrong!');case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(){return _ref.apply(this,arguments);};}();setLoad(true);var formData=new FormData();formData.append('to',to);formData.append('from',from);submit().catch(function(err){return toast.error('Internal server error!. Please try again later');});}else{toast.error('Please fill the to and from date');}}return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:from,onChange:function onChange(e){return setFrom(e.target.value);},className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:to,onChange:function onChange(e){return setTo(e.target.value);},className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return handleSubmit();},children:\"Submit\"})})]})}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"section\",{className:\"day-wise-profit-table col-md-4\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"bg-white w-100 text-dark px-3 py-3\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Sales\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",sale]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Purchase\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"- \",purchase]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Expense\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"- \",expense]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{fontWeight:'bold'},children:\"Total\"}),/*#__PURE__*/_jsx(\"td\",{style:{fontWeight:'bold'},children:parseFloat(sale)-parseFloat(purchase)-parseFloat(expense)})]})]})})]});}","map":{"version":3,"sources":["/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/src/screens/Reports/DayWiseProfit.js"],"names":["React","url","toast","ToastContainer","userContext","DayWiseProfit","useContext","user","setLoad","useState","expense","setExpense","sale","setSale","purchase","setPurchase","to","setTo","from","setFrom","useEffect","fetchData","fetch","method","headers","token","response","ok","json","data","status","expense_record","purchase_record","sales_record","error","message","handleSubmit","submit","body","formData","FormData","append","catch","err","e","target","value","fontWeight","parseFloat"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { url } from 'src/helpers/helpers';\nimport { toast, ToastContainer } from 'react-toastify'\nimport { userContext } from '../../context/UserContext'\n\nexport default function DayWiseProfit() {\n    const { user,setLoad } = React.useContext(userContext);\n    const [expense, setExpense] = React.useState(0);\n    const [sale, setSale] = React.useState(0);\n    const [purchase, setPurchase] = React.useState(0);\n    const [to, setTo] = React.useState('');\n    const [from, setFrom] = React.useState('');\n\n    React.useEffect(() => {\n        setLoad(true)\n        async function fetchData() {\n            const response = await fetch(url + 'get-total-profile-record', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n\n            if (response.ok === true) {\n                const data = await response.json();\n                setLoad(false)\n                if (data.status === 200) {\n                    setExpense(data.expense_record);\n                    setPurchase(data.purchase_record);\n                    setSale(data.sales_record);\n                } else {\n                    toast.error(data.message);\n                }\n            }\n        }\n\n        fetchData();\n    }, [])\n\n    function handleSubmit() {\n        if (to && from) {\n            setLoad(true)\n            const formData = new FormData();\n            formData.append('to', to);\n            formData.append('from', from);\n            async function submit() {\n                const response = await fetch(url + 'get-profit-data', {\n                    method: 'POST',\n                    headers: {\n                        'Authorization': user?.token\n                    },\n                    body: formData\n                });\n\n                if (response.ok === true) {\n                    const data = await response.json();\n                    setLoad(false)\n                    if (data.status == 200) {\n                        setExpense(data.expense_record);\n                        setPurchase(data.purchase_record);\n                        setSale(data.sales_record);\n                    } else {\n                        toast.error(data.message)\n                    }\n                } else {\n                    toast.error('Oops something went wrong!')\n                }\n            }\n\n            submit().catch(err => toast.error('Internal server error!. Please try again later'))\n        } else {\n            toast.error('Please fill the to and from date')\n        }\n    }\n\n    return (\n        <section>\n\n            <div className=\"container\">\n                <div className=\"row align-items-center\">\n                    <div className=\"form-group col-md-4\">\n                        <label htmlFor=\"\">From</label>\n                        <input type=\"date\" value={from} onChange={e => setFrom(e.target.value)} className=\"form-control\" />\n                    </div>\n                    <div className=\"form-group col-md-4\">\n                        <label htmlFor=\"\">To</label>\n                        <input type=\"date\" value={to} onChange={e => setTo(e.target.value)} className=\"form-control\" />\n                    </div>\n\n                    <div className=\"col-md-4\">\n                        <button className=\"btn btn-primary\" onClick={() => handleSubmit()}>Submit</button>\n                    </div>\n                </div>\n            </div>\n            <ToastContainer />\n\n            <section className='day-wise-profit-table col-md-4'>\n                <table className='bg-white w-100 text-dark px-3 py-3'>\n                    <tr>\n                        <td>Sales</td>\n                        <td> {sale}</td>\n                    </tr>\n                    <tr>\n                        <td>Purchase</td>\n                        <td>- {purchase}</td>\n                    </tr>\n                    <tr>\n                        <td>Expense</td>\n                        <td>- {expense}</td>\n                    </tr>\n                    <tr>\n                        <td style={{fontWeight:'bold'}}>Total</td>\n                        <td style={{fontWeight:'bold'}}>{parseFloat(sale) - parseFloat(purchase) - parseFloat(expense)}</td>\n                    </tr>\n                </table>\n            </section>\n        </section>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}