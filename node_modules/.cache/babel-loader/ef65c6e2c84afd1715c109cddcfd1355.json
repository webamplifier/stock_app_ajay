{"ast":null,"code":"import _asyncToGenerator from\"/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{Fragment}from'react';import ReactDatatable from'@ashvin27/react-datatable';import{Link}from'react-router-dom';import{url}from'src/helpers/helpers';import{toast,ToastContainer}from'react-toastify';import{userContext}from'../../context/UserContext';import CustomModal from'src/components/CustomModal';import{formatDate}from'src/helpers/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Index(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),id=_React$useState2[0],setId=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),modal=_React$useState4[0],setModal=_React$useState4[1];var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),companyList=_React$useState6[0],setCompanyList=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),total=_React$useState8[0],setTotal=_React$useState8[1];React.useEffect(function(){setLoad(true);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url+'fetchCompanyList',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context.sent;if(!(response.ok===true)){_context.next=9;break;}_context.next=6;return response.json();case 6:data=_context.sent;setLoad(false);if(data.status===200){setCompanyList(data.list.map(function(item,index){return{'#':index+1,'id':item.id,'name':item.name,'email':item.email,'mobile':item.mobile,'gst':item.gst,'default_gst':item.default_gst===\"true\"?\"GST\":\"NON-GST\",'expiry_date':formatDate(item.expiry_date.split(' ')[0]),'print_preference_purchase':item.print_preference_purchase,'print_preference_sales':item.print_preference_sales,'one_time_amount':item.one_time_amount,'renew_amount':item.renew_amount,'status':item.status===1?\"Active\":\"Inactive\"};}));setTotal(parseInt(data.total_records));}case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var deleteEntry=function deleteEntry(){setLoad(true);function deleteData(){return _deleteData.apply(this,arguments);}function _deleteData(){_deleteData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data,_fetchData2;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(url+'deletecompany/'+id,{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;setLoad(false);if(data.status===200){_fetchData2=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,_data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(url+'fetchCompanyList',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context2.sent;if(!(response.ok===true)){_context2.next=9;break;}_context2.next=6;return response.json();case 6:_data=_context2.sent;setLoad(false);if(_data.status===200){setCompanyList(_data.list.map(function(item,index){return{'#':index+1,'id':item.id,'name':item.name,'email':item.email,'mobile':item.mobile,'gst':item.gst,'default_gst':item.default_gst===\"true\"?\"GST\":\"NON-GST\",'expiry_date':formatDate(item.expiry_date.split(' ')[0]),'one_time_amount':item.one_time_amount,'renew_amount':item.renew_amount,'print_preference_purchase':item.print_preference_purchase,'print_preference_sales':item.print_preference_sales,'status':item.status===1?\"Active\":\"Inactive\"};}));setTotal(parseInt(_data.total_records));}case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function _fetchData2(){return _ref.apply(this,arguments);};}();setModal(false);setId('');_fetchData2();}else{toast.error(data.message);}case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _deleteData.apply(this,arguments);}deleteData();};var columns=[{key:\"#\",text:\"#\",className:\"#\",sortable:false},{key:\"name\",text:\"Company Name\",className:\"name\",sortable:true},{key:\"email\",text:\"Email\",className:\"email\",sortable:true},{key:\"mobile\",text:\"Mobile\",className:\"mobile\",sortable:true},{key:\"default_gst\",text:\"Company Type(GST)\",className:\"default_gst\",sortable:true},{key:\"gst\",text:\"GST No.\",className:\"gst\",sortable:true},{key:\"print_preference_purchase\",text:\"Purchase Preference\",className:\"print_preference_purchase\",sortable:true},{key:\"print_preference_sales\",text:\"Sales Preference\",className:\"print_preference_sales\",sortable:true},{key:\"one_time_amount\",text:\"First Amount\",className:\"one_time_amount\",sortable:true},{key:\"renew_amount\",text:\"Renew amount\",className:\"renew_amount\",sortable:true},{key:\"status\",text:\"Status\",className:\"status\",sortable:true},{key:\"action\",text:\"Action\",className:\"action\",width:100,sortable:false,cell:function cell(record){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/edit/company/\".concat(record.id),style:{marginRight:'5px'},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil mr-1\"})}),/*#__PURE__*/_jsx(\"i\",{style:{cursor:\"pointer\"},onClick:function onClick(){return showModal(record.id);},class:\"fa fa-trash\",\"aria-hidden\":\"true\"})]});}}];var config={page_size:10,length_menu:[10,20,50],button:{excel:false,print:false,extra:false}};var showModal=function showModal(value){setId(value);setModal(true);};function fetchData(_x){return _fetchData3.apply(this,arguments);}function _fetchData3(){_fetchData3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(query){var response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setLoad(true);_context4.next=3;return fetch(url+query,{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context4.sent;if(!(response.ok===true)){_context4.next=10;break;}_context4.next=7;return response.json();case 7:data=_context4.sent;setLoad(false);if(data.status===200){setCompanyList(data.list.map(function(item,index){return{'#':index+1,'id':item.id,'name':item.name,'email':item.email,'mobile':item.mobile,'gst':item.gst,'default_gst':item.default_gst===\"true\"?\"GST\":\"NON-GST\",'expiry_date':formatDate(item.expiry_date.split(' ')[0]),'one_time_amount':item.one_time_amount,'renew_amount':item.renew_amount,'print_preference_purchase':item.print_preference_purchase,'print_preference_sales':item.print_preference_sales,'status':item.status===1?\"Active\":\"Inactive\"};}));setTotal(parseInt(data.total_records));}else{toast.error(data.message);}case 10:case\"end\":return _context4.stop();}}},_callee4);}));return _fetchData3.apply(this,arguments);}var handleChange=function handleChange(e){var query=\"fetchCompanyList?page_number=\".concat(e.page_number,\"&page_size=\").concat(e.page_size,\"&filter_value=\").concat(e.filter_value);if(e.sort_order){var sort=JSON.stringify(e.sort_order);query=\"fetchCompanyList?page_number=\".concat(e.page_number,\"&page_size=\").concat(e.page_size,\"&filter_value=\").concat(e.filter_value,\"&sort_order=\").concat(sort);}fetchData(query);};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(CustomModal,{modal:modal,setModal:setModal,deleteEntry:deleteEntry}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary float-right\",to:\"/create/company\",children:\"Create Company\"}),/*#__PURE__*/_jsx(ReactDatatable,{config:config,records:companyList,columns:columns,total_record:total,onChange:function onChange(e){return handleChange(e);},dynamic:true})]});}","map":{"version":3,"sources":["/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/src/screens/Companies/index.js"],"names":["React","Fragment","ReactDatatable","Link","url","toast","ToastContainer","userContext","CustomModal","formatDate","Index","useState","id","setId","modal","setModal","useContext","user","setLoad","companyList","setCompanyList","total","setTotal","useEffect","fetchData","fetch","method","headers","token","response","ok","json","data","status","list","map","item","index","name","email","mobile","gst","default_gst","expiry_date","split","print_preference_purchase","print_preference_sales","one_time_amount","renew_amount","parseInt","total_records","deleteEntry","deleteData","error","message","columns","key","text","className","sortable","width","cell","record","marginRight","cursor","showModal","config","page_size","length_menu","button","excel","print","extra","value","query","handleChange","e","page_number","filter_value","sort_order","sort","JSON","stringify"],"mappings":"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","sourcesContent":["import React,{Fragment} from 'react';\nimport ReactDatatable from '@ashvin27/react-datatable';\nimport { Link } from 'react-router-dom';\nimport { url } from 'src/helpers/helpers';\nimport { toast, ToastContainer } from 'react-toastify';\nimport { userContext } from '../../context/UserContext';\nimport CustomModal from 'src/components/CustomModal';\nimport { formatDate } from 'src/helpers/helpers';\n\nexport default function Index() {\n  const [id, setId] = React.useState(null);\n  const [modal, setModal] = React.useState(false)\n  const { user,setLoad } = React.useContext(userContext);\n  const [companyList, setCompanyList] = React.useState([]);\n  const [total,setTotal] = React.useState(0); \n  \n  React.useEffect(() => {\n    setLoad(true)\n    async function fetchData() {\n      const response = await fetch(url + 'fetchCompanyList', {\n        method: 'GET',\n        headers: {\n          'Authorization': user?.token\n        }\n      })\n      if(response.ok === true) {\n        const data = await response.json();\n        setLoad(false)\n        if (data.status === 200) {\n          setCompanyList(data.list.map((item, index) => {\n            return {\n              '#': index + 1,\n              'id': item.id,\n              'name': item.name,\n              'email': item.email,\n              'mobile': item.mobile,\n              'gst': item.gst,\n              'default_gst': item.default_gst===\"true\"?\"GST\" : \"NON-GST\",\n              'expiry_date': formatDate(item.expiry_date.split(' ')[0]),\n              'print_preference_purchase': item.print_preference_purchase,\n              'print_preference_sales': item.print_preference_sales,\n              'one_time_amount': item.one_time_amount,\n              'renew_amount': item.renew_amount,\n              'status': item.status===1?\"Active\" : \"Inactive\"\n            }\n          }));\n          setTotal(parseInt(data.total_records));\n        }\n      }\n    }\n    fetchData();\n  }, [])\n\n  const deleteEntry = () => {\n    setLoad(true)\n    async function deleteData() {\n      const response = await fetch(url + 'deletecompany/' + id, {\n        method: 'GET',\n        headers: {\n          'Authorization': user?.token\n        }\n      })\n      const data = await response.json();\n      setLoad(false)\n      if (data.status === 200) {\n        setModal(false);\n        setId('');\n        async function fetchData() {\n          const response = await fetch(url + 'fetchCompanyList', {\n            method: 'GET',\n            headers: {\n              'Authorization': user?.token\n            }\n          })\n    \n          if (response.ok === true) {\n            const data = await response.json();\n            setLoad(false)\n            if (data.status === 200) {\n                setCompanyList(data.list.map((item, index) => {\n                    return {\n                      '#': index + 1,\n                      'id': item.id,\n                      'name': item.name,\n                      'email': item.email,\n                      'mobile': item.mobile,\n                      'gst': item.gst,\n                      'default_gst': item.default_gst===\"true\" ? \"GST\" : \"NON-GST\",\n                      'expiry_date': formatDate(item.expiry_date.split(' ')[0]),\n                      'one_time_amount': item.one_time_amount,\n                      'renew_amount': item.renew_amount,\n                      'print_preference_purchase': item.print_preference_purchase,\n                      'print_preference_sales': item.print_preference_sales,\n                      'status': item.status===1?\"Active\" : \"Inactive\"\n                    }\n                  }));\n              setTotal(parseInt(data.total_records));\n            }\n          }\n        }\n        fetchData();\n      } else {\n        toast.error(data.message)\n      }\n    }\n    deleteData();\n  }\n  \n  const columns = [\n    {\n        key: \"#\",\n        text: \"#\",\n        className: \"#\",\n        sortable: false,\n    },\n    {\n        key: \"name\",\n        text: \"Company Name\",\n        className: \"name\",\n        sortable: true\n    },\n    {\n        key: \"email\",\n        text: \"Email\",\n        className: \"email\",\n        sortable: true\n    },\n    {\n        key: \"mobile\",\n        text: \"Mobile\",\n        className: \"mobile\",\n        sortable: true\n    },\n    {\n      key: \"default_gst\",\n      text: \"Company Type(GST)\",\n      className: \"default_gst\",\n      sortable: true\n    },\n    {\n        key: \"gst\",\n        text: \"GST No.\",\n        className: \"gst\",\n        sortable: true\n    },\n    {\n      key: \"print_preference_purchase\",\n      text: \"Purchase Preference\",\n      className: \"print_preference_purchase\",\n      sortable: true\n    },\n    {\n        key: \"print_preference_sales\",\n        text: \"Sales Preference\",\n        className: \"print_preference_sales\",\n        sortable: true\n    },\n    {\n        key: \"one_time_amount\",\n        text: \"First Amount\",\n        className: \"one_time_amount\",\n        sortable: true\n    },\n    {\n        key: \"renew_amount\",\n        text: \"Renew amount\",\n        className: \"renew_amount\",\n        sortable: true\n    },\n    {\n        key: \"status\",\n        text: \"Status\",\n        className: \"status\",\n        sortable: true\n    },\n    {\n        key: \"action\",\n        text: \"Action\",\n        className: \"action\",\n        width: 100,\n        sortable: false,\n        cell: record => { \n            return (\n                <Fragment>      \n                    <Link\n                        to={`/edit/company/${record.id}`} \n                        style={{marginRight: '5px'}}>    \n                        <i className=\"fa fa-pencil mr-1\"></i>\n                    </Link>\n                    <i \n                    style={{ cursor: \"pointer\" }} \n                    onClick={() => showModal(record.id)} \n                    class=\"fa fa-trash\" \n                    aria-hidden=\"true\">   \n                    </i>\n                </Fragment>\n            );\n        }\n    }\n];\n\nconst config = {\n    page_size: 10,\n    length_menu: [ 10, 20, 50 ],\n    button: {\n        excel: false,\n        print: false,\n        extra: false,\n    }\n}\n  const showModal = value => {\n    setId(value);\n    setModal(true)\n  }\n  async function fetchData(query) {\n    setLoad(true);\n    const response = await fetch(url + query, {\n        method: 'GET',\n        headers: {\n            'Authorization': user?.token\n        }\n    })\n    if (response.ok === true) {\n        const data = await response.json();\n        setLoad(false)\n        if (data.status === 200) {\n            setCompanyList(data.list.map((item, index) => {\n                return {\n                  '#': index + 1,\n                  'id': item.id,\n                  'name': item.name,\n                  'email': item.email,\n                  'mobile': item.mobile,\n                  'gst': item.gst,\n                  'default_gst': item.default_gst===\"true\"?\"GST\" : \"NON-GST\",\n                  'expiry_date': formatDate(item.expiry_date.split(' ')[0]),\n                  'one_time_amount': item.one_time_amount,\n                  'renew_amount': item.renew_amount,\n                  'print_preference_purchase': item.print_preference_purchase,\n                  'print_preference_sales': item.print_preference_sales,\n                  'status': item.status===1?\"Active\" : \"Inactive\"\n                }\n              }));\n          setTotal(parseInt(data.total_records));\n        } else {\n            toast.error(data.message);\n        }\n    }\n}\nconst handleChange=(e)=>{\n  let query=`fetchCompanyList?page_number=${e.page_number}&page_size=${e.page_size}&filter_value=${e.filter_value}`;\n  if(e.sort_order){\n      let sort = JSON.stringify(e.sort_order);\n      query=`fetchCompanyList?page_number=${e.page_number}&page_size=${e.page_size}&filter_value=${e.filter_value}&sort_order=${sort}`;\n  }\n  fetchData(query);\n}\n\n  return (\n    <section>\n      <ToastContainer />\n      <CustomModal modal={modal} setModal={setModal} deleteEntry={deleteEntry} />\n      <Link className='btn btn-primary float-right' to='/create/company'>Create Company</Link>\n      <ReactDatatable\n          config={config}\n          records={companyList}\n          columns={columns}\n          total_record={total}\n          onChange={(e)=>handleChange(e)}\n          dynamic={true}\n        />\n    </section>\n  )\n}"]},"metadata":{},"sourceType":"module"}