{"ast":null,"code":"import _asyncToGenerator from\"/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{CChartDoughnut}from'@coreui/react-chartjs';import React,{lazy}from'react';import ChartBarSimple from'../charts/ChartBarSimple.js';import{userContext}from'../../context/UserContext';import{url}from'src/helpers/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var WidgetsDropdown=/*#__PURE__*/lazy(function(){return import('../widgets/WidgetsDropdown.js');});var Dashboard=function Dashboard(){var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),pie_data=_React$useState2[0],setTotalData=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),date_array=_React$useState4[0],setDateArray=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),purchase_record=_React$useState6[0],setPurchaseRecord=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),sales_record=_React$useState8[0],setSalesRecord=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),expense_record=_React$useState10[0],setExpenseRecord=_React$useState10[1];React.useEffect(function(){function fetchPieData(){return _fetchPieData.apply(this,arguments);}function _fetchPieData(){_fetchPieData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data,total_record;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return fetch(url+'get-total-profile-record',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context.sent;if(!(response.ok===true)){_context.next=10;break;}_context.next=7;return response.json();case 7:data=_context.sent;setLoad(false);if(data.status===200){total_record=[];total_record.push(parseFloat(data.sales_record));total_record.push(parseFloat(data.purchase_record));total_record.push(parseFloat(data.expense_record));setTotalData(total_record);}else{alert(data.message);}case 10:case\"end\":return _context.stop();}}},_callee);}));return _fetchPieData.apply(this,arguments);}fetchPieData();function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoad(true);_context2.next=3;return fetch(url+'fetchLastWeekSales',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context2.sent;if(!(response.ok===true)){_context2.next=10;break;}_context2.next=7;return response.json();case 7:data=_context2.sent;setLoad(false);if(data.status===200){setDateArray(data.date_array);setPurchaseRecord(data.purchase_record);setSalesRecord(data.sale_record);setExpenseRecord(data.expense_record);}else{alert(data.message);}case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchData.apply(this,arguments);}fetchData();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(CChartDoughnut,{datasets:[{backgroundColor:['#41B883','#E46651','#00D8FF'],data:pie_data}],labels:['Sales','Purchase','Expense'],options:{tooltips:{enabled:true}}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(WidgetsDropdown,{})})]}),/*#__PURE__*/_jsx(ChartBarSimple,{style:{height:\"400px\",marginTop:40},backgroundColor:\"#41B883\",dataPoints:sales_record,date_array:date_array,label:\"Sales\"}),/*#__PURE__*/_jsx(ChartBarSimple,{style:{height:\"400px\",marginTop:40},backgroundColor:\"#E46651\",dataPoints:purchase_record,date_array:date_array,label:\"Purchase\"}),/*#__PURE__*/_jsx(ChartBarSimple,{style:{height:\"400px\",marginTop:40},backgroundColor:\"#00D8FF\",dataPoints:expense_record,date_array:date_array,label:\"Expense\"})]});};export default Dashboard;","map":{"version":3,"sources":["/Users/alihussainkabri/Downloads/projects/old projects/erp2.0/erp-2.0/frontend/src/views/dashboard/Dashboard.js"],"names":["CChartDoughnut","React","lazy","ChartBarSimple","userContext","url","WidgetsDropdown","Dashboard","useContext","user","setLoad","useState","pie_data","setTotalData","date_array","setDateArray","purchase_record","setPurchaseRecord","sales_record","setSalesRecord","expense_record","setExpenseRecord","useEffect","fetchPieData","fetch","method","headers","token","response","ok","json","data","status","total_record","push","parseFloat","alert","message","fetchData","sale_record","backgroundColor","tooltips","enabled","height","marginTop"],"mappings":"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","sourcesContent":["import { CChartDoughnut } from '@coreui/react-chartjs';\nimport React, { lazy } from 'react';\nimport ChartBarSimple from '../charts/ChartBarSimple.js';\nimport { userContext } from '../../context/UserContext';\nimport { url } from 'src/helpers/helpers';\n\nconst WidgetsDropdown = lazy(() => import('../widgets/WidgetsDropdown.js'))\n\nconst Dashboard = () => {\n  const { user,setLoad } = React.useContext(userContext);\n  const [pie_data,setTotalData] = React.useState([]);\n  const [date_array,setDateArray] = React.useState([]);\n  const [purchase_record,setPurchaseRecord] = React.useState([]);\n  const [sales_record, setSalesRecord] = React.useState([]);\n  const [expense_record, setExpenseRecord] = React.useState([]);\n  \n  React.useEffect(()=>{\n    \n    async function fetchPieData(){\n      setLoad(true);\n      const response = await fetch(url + 'get-total-profile-record', {\n        method: 'GET',\n        headers: {\n            'Authorization': user?.token\n        }\n    })\n\n    if (response.ok === true) {\n        const data = await response.json();\n        setLoad(false)\n        if (data.status === 200) {\n           let total_record=[];\n           total_record.push(parseFloat(data.sales_record));\n           total_record.push(parseFloat(data.purchase_record));\n           total_record.push(parseFloat(data.expense_record));\n           setTotalData(total_record);\n        } else {\n            alert(data.message);\n        }\n    }\n    }\n    fetchPieData();\n    \n    async function fetchData() {\n      setLoad(true);\n      const response = await fetch(url + 'fetchLastWeekSales', {\n          method: 'GET',\n          headers: {\n              'Authorization': user?.token\n          }\n      })\n\n      if (response.ok === true) {\n          const data = await response.json();\n          setLoad(false)\n          if (data.status === 200) {\n              setDateArray(data.date_array);\n              setPurchaseRecord(data.purchase_record);\n              setSalesRecord(data.sale_record);\n              setExpenseRecord(data.expense_record);\n          } else {\n              alert(data.message);\n          }\n      }\n  }\n\n  fetchData();\n  },[])\n  return (\n    <>\n      <div className='row'>\n        <div className='col-md-6'>\n          <CChartDoughnut datasets={[\n            {\n              backgroundColor: [\n                '#41B883',\n                '#E46651',\n                '#00D8FF',\n              ],\n              data: pie_data\n            }\n          ]}\n            labels={['Sales', 'Purchase', 'Expense']}\n            options={{\n              tooltips: {\n                enabled: true\n              }\n            }} />\n        </div>\n\n        <div className='col-md-6'>\n        <WidgetsDropdown />\n        </div>\n      </div>\n      <ChartBarSimple style={{ height: \"400px\", marginTop: 40 }} backgroundColor='#41B883' dataPoints={sales_record} date_array={date_array} label=\"Sales\" />\n      <ChartBarSimple style={{ height: \"400px\", marginTop: 40 }} backgroundColor='#E46651' dataPoints={purchase_record} date_array={date_array} label=\"Purchase\" />\n      <ChartBarSimple style={{ height: \"400px\", marginTop: 40 }} backgroundColor='#00D8FF' dataPoints={expense_record} date_array={date_array} label=\"Expense\" />\n\n    </>\n  )\n}\n\nexport default Dashboard\n"]},"metadata":{},"sourceType":"module"}