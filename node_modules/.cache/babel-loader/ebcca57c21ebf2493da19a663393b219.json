{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{Fragment}from'react';import ReactDatatable from'@ashvin27/react-datatable';import{Link}from'react-router-dom';import{url}from'src/helpers/helpers';import PayModal from'../../components/PayModal';import{toast,ToastContainer}from'react-toastify';import{userContext}from'../../context/UserContext';import CustomModal from'../../components/CustomModal';import{formatDate}from'src/helpers/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PurchaseReport(){var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),purchaseList=_React$useState2[0],setPurchaseList=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),payAmount=_React$useState4[0],setPayAmount=_React$useState4[1];var _React$useState5=React.useState('cash'),_React$useState6=_slicedToArray(_React$useState5,2),paymentMode=_React$useState6[0],setPaymentMode=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),paymodal=_React$useState8[0],setPayModal=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),modal=_React$useState10[0],setModal=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),from_Date=_React$useState12[0],setFromDate=_React$useState12[1];var _React$useState13=React.useState(''),_React$useState14=_slicedToArray(_React$useState13,2),to_Date=_React$useState14[0],setToDate=_React$useState14[1];var _React$useState15=React.useState(''),_React$useState16=_slicedToArray(_React$useState15,2),id=_React$useState16[0],setId=_React$useState16[1];var _React$useState17=React.useState(0),_React$useState18=_slicedToArray(_React$useState17,2),total=_React$useState18[0],setTotal=_React$useState18[1];var payBill=function payBill(){setLoad(true);function payBillServer(){return _payBillServer.apply(this,arguments);}function _payBillServer(){_payBillServer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var formData,response,data,_fetchData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formData=new FormData();formData.append('pay_amount',payAmount);formData.append('payment_mode',paymentMode);_context2.next=5;return fetch(url+'pay/purchase/'+id,{method:'POST',headers:{'Authorization':user.token},body:formData});case 5:response=_context2.sent;if(!response){_context2.next=11;break;}_context2.next=9;return response.json();case 9:data=_context2.sent;if(data.status===200){_fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url+'fetchPurchaseList',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context.sent;if(!(response.ok===true)){_context.next=9;break;}_context.next=6;return response.json();case 6:_data=_context.sent;setLoad(false);if(_data.status===200){setPurchaseList(_data.list.map(function(item,index){return{'#':index+1,'id':item.id,'invoice_number':item.invoice_number,'party_name':item.party_name,'warehouse_name':item.warehouse_name,'purchase_date':formatDate(item.purchase_date.split(' ')[0]),'total_supply':item.total_supply,'remain_amount':item.remain_amount};}));setTotal(parseInt(_data.total_records));}else{toast.error(_data.message);}case 9:case\"end\":return _context.stop();}}},_callee);}));return function _fetchData(){return _ref.apply(this,arguments);};}();setPayModal(false);setId('');_fetchData();}else{toast.error(data.message);}case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _payBillServer.apply(this,arguments);}payBillServer();};var payModal=function payModal(item,id){setPayAmount(parseFloat(item.remain_amount));setPayModal(true);setId(id);};var deleteEntry=function deleteEntry(){setLoad(true);function deleteData(){return _deleteData.apply(this,arguments);}function _deleteData(){_deleteData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var response,data,_fetchData2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(url+'deletePurchase/'+id,{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:data=_context4.sent;if(data.status===200){_fetchData2=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,_data2;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(url+'fetchPurchaseList',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context3.sent;if(!(response.ok===true)){_context3.next=9;break;}_context3.next=6;return response.json();case 6:_data2=_context3.sent;setLoad(false);if(_data2.status===200){setPurchaseList(_data2.list.map(function(item,index){return{'#':index+1,'id':item.id,'invoice_number':item.invoice_number,'party_name':item.party_name,'warehouse_name':item.warehouse_name,'purchase_date':formatDate(item.purchase_date.split(' ')[0]),'total_supply':item.total_supply,'remain_amount':item.remain_amount};}));setTotal(parseInt(_data2.total_records));}else{toast.error(_data2.message);}case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function _fetchData2(){return _ref2.apply(this,arguments);};}();setModal(false);setId('');_fetchData2();}else{toast.error(data.message);}case 7:case\"end\":return _context4.stop();}}},_callee4);}));return _deleteData.apply(this,arguments);}deleteData();};React.useEffect(function(){setLoad(true);function fetchData(){return _fetchData3.apply(this,arguments);}function _fetchData3(){_fetchData3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(url+'fetchPurchaseList',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context5.sent;if(!(response.ok===true)){_context5.next=9;break;}_context5.next=6;return response.json();case 6:data=_context5.sent;setLoad(false);if(data.status===200){setPurchaseList(data.list.map(function(item,index){return{'#':index+1,'id':item.id,'invoice_number':item.invoice_number,'party_name':item.party_name,'warehouse_name':item.warehouse_name,'purchase_date':formatDate(item.purchase_date.split(' ')[0]),'total_supply':item.total_supply,'remain_amount':item.remain_amount};}));setTotal(parseInt(data.total_records));}else{toast.error(data.message);}case 9:case\"end\":return _context5.stop();}}},_callee5);}));return _fetchData3.apply(this,arguments);}fetchData();},[]);function handleSubmit(e){e.preventDefault();if(to_Date&&from_Date){var submit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var response,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(url+\"fetchPurchaseList?to=\".concat(to_Date,\"&from=\").concat(from_Date),{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 2:response=_context6.sent;if(!(response.ok===true)){_context6.next=11;break;}_context6.next=6;return response.json();case 6:data=_context6.sent;setLoad(false);if(data.status===200){setPurchaseList(data.list.map(function(item,index){return{'#':index+1,'id':item.id,'invoice_number':item.invoice_number,'party_name':item.party_name,'warehouse_name':item.warehouse_name,'purchase_date':formatDate(item.purchase_date.split(' ')[0]),'total_supply':item.total_supply,'remain_amount':item.remain_amount};}));setTotal(parseInt(data.total_records));}else{toast.error(data.message);}_context6.next=12;break;case 11:toast.error('Oops something went wrong!');case 12:case\"end\":return _context6.stop();}}},_callee6);}));return function submit(){return _ref3.apply(this,arguments);};}();setLoad(true);submit().catch(function(err){return toast.error('Internal server error!. Please try again later');});}else{toast.error('Please fill the to and from date');}}var columns=[{key:\"#\",text:\"#\",className:\"#\",sortable:false},{key:\"invoice_number\",text:\"Invoice Number\",className:\"invoice_number\",sortable:true},{key:\"purchase_date\",text:\"Purchase Date\",className:\"purchase_date\",sortable:true},{key:\"warehouse_name\",text:\"Warehouse Name\",className:\"warehouse_name\",sortable:true},{key:\"party_name\",text:\"Party Name\",className:\"party_name\",sortable:true},{key:\"total_supply\",text:\"Bill Amount\",className:\"bill_amount\",sortable:true},{key:\"remain_amount\",text:\"Remain Amount\",className:\"remain_amount\",sortable:true},{key:\"action\",text:\"Action\",className:\"action\",width:100,sortable:false,cell:function cell(record){return/*#__PURE__*/_jsxs(Fragment,{children:[parseFloat(record.remain_amount)!==0&&/*#__PURE__*/_jsx(\"i\",{style:{cursor:'pointer'},onClick:function onClick(){return payModal(record,record.id);},className:\"fa fa-money mr-2\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(Link,{to:\"/edit/purchase/\".concat(record.id),style:{marginRight:'5px'},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil mr-2\"})}),/*#__PURE__*/_jsx(\"i\",{style:{cursor:\"pointer\"},onClick:function onClick(){return showModal(record.id);},class:\"fa fa-trash\",\"aria-hidden\":\"true\"})]});}}];var config={page_size:10,length_menu:[10,20,50],button:{excel:false,print:false,extra:false}};var showModal=function showModal(value){setId(value);setModal(true);};function fetchData(_x){return _fetchData4.apply(this,arguments);}function _fetchData4(){_fetchData4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(query){var response,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setLoad(true);_context7.next=3;return fetch(url+query,{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context7.sent;if(!(response.ok===true)){_context7.next=10;break;}_context7.next=7;return response.json();case 7:data=_context7.sent;setLoad(false);if(data.status===200){setPurchaseList(data.list.map(function(item,index){return{'#':index+1,'id':item.id,'party_name':item.party_name,'warehouse_name':item.warehouse_name,'purchase_date':formatDate(item.purchase_date.split(' ')[0]),'total_supply':item.total_supply,'discount_amount':parseFloat(item.bill_discount_percentage)?\"\".concat(item.bill_discount_percentage,\"%\"):item.bill_discount_amount,'amount_paid':item.amount_paid,'remain_amount':item.remain_amount};}));setTotal(parseInt(data.total_records));}else{toast.error(data.message);}case 10:case\"end\":return _context7.stop();}}},_callee7);}));return _fetchData4.apply(this,arguments);}var handleChange=function handleChange(e){var query=\"fetchPurchaseList?page_number=\".concat(e.page_number,\"&page_size=\").concat(e.page_size,\"&filter_value=\").concat(e.filter_value,\"&to=\").concat(to_Date,\"&from=\").concat(from_Date);if(e.sort_order){var sort=JSON.stringify(e.sort_order);query=\"fetchPurchaseList?page_number=\".concat(e.page_number,\"&page_size=\").concat(e.page_size,\"&filter_value=\").concat(e.filter_value,\"&sort_order=\").concat(sort,\"&to=\").concat(to_Date,\"&from=\").concat(from_Date);}fetchData(query);};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(CustomModal,{modal:modal,setModal:setModal,deleteEntry:deleteEntry}),/*#__PURE__*/_jsx(PayModal,{paymodal:paymodal,setPayModal:setPayModal,payAmount:payAmount,setPayAmount:setPayAmount,paymentMode:paymentMode,payBill:payBill,setPaymentMode:setPaymentMode}),/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-row create-purchase-header\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"date\",children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{value:from_Date,onChange:function onChange(e){return setFromDate(e.target.value);},type:\"date\",class:\"form-control\",id:\"date\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"date\",children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{value:to_Date,onChange:function onChange(e){return setToDate(e.target.value);},type:\"date\",class:\"form-control\",id:\"date\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group col-md-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"Submit\",class:\"font-weight-bold my-4 py-2 px-4 btn btn-success\",children:\"Filter\"})})]})}),/*#__PURE__*/_jsx(ReactDatatable,{config:config,records:purchaseList,columns:columns,total_record:total,onChange:function onChange(e){return handleChange(e);},dynamic:true})]});}","map":{"version":3,"sources":["/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/src/screens/Reports/PurchaseReport.js"],"names":["React","Fragment","ReactDatatable","Link","url","PayModal","toast","ToastContainer","userContext","CustomModal","formatDate","PurchaseReport","useContext","user","setLoad","useState","purchaseList","setPurchaseList","payAmount","setPayAmount","paymentMode","setPaymentMode","paymodal","setPayModal","modal","setModal","from_Date","setFromDate","to_Date","setToDate","id","setId","total","setTotal","payBill","payBillServer","formData","FormData","append","fetch","method","headers","token","body","response","json","data","status","fetchData","ok","list","map","item","index","invoice_number","party_name","warehouse_name","purchase_date","split","total_supply","remain_amount","parseInt","total_records","error","message","payModal","parseFloat","deleteEntry","deleteData","useEffect","handleSubmit","e","preventDefault","submit","catch","err","columns","key","text","className","sortable","width","cell","record","cursor","marginRight","showModal","config","page_size","length_menu","button","excel","print","extra","value","query","bill_discount_percentage","bill_discount_amount","amount_paid","handleChange","page_number","filter_value","sort_order","sort","JSON","stringify","target"],"mappings":"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","sourcesContent":["import React,{Fragment} from 'react';\nimport ReactDatatable from '@ashvin27/react-datatable';\nimport { Link } from 'react-router-dom';\nimport { url } from 'src/helpers/helpers';\nimport PayModal from '../../components/PayModal';\nimport { toast, ToastContainer } from 'react-toastify'\nimport { userContext } from '../../context/UserContext'\nimport CustomModal from '../../components/CustomModal';\nimport { formatDate } from 'src/helpers/helpers';\n\nexport default function PurchaseReport() {\n    const { user,setLoad } = React.useContext(userContext);    \n    const [purchaseList, setPurchaseList] = React.useState([]);\n    const [payAmount, setPayAmount] = React.useState(0);\n    const [paymentMode, setPaymentMode] = React.useState('cash');\n    const [paymodal,setPayModal] = React.useState(false);\n    const [modal, setModal] = React.useState(false);\n    const [from_Date, setFromDate] = React.useState('');\n    const [to_Date, setToDate] = React.useState('');\n    const [id, setId] = React.useState('');\n    const [total,setTotal] = React.useState(0); \n    \n    const payBill = () => {\n        setLoad(true)\n        async function payBillServer(){\n            const formData = new FormData();\n            formData.append('pay_amount',payAmount);\n            formData.append('payment_mode',paymentMode);\n            const response = await fetch(url + 'pay/purchase/' + id,{\n                method : 'POST',\n                headers : {\n                    'Authorization' : user.token\n                },\n                body : formData\n            })\n               \n            if (response){\n                const data = await response.json();\n\n                if (data.status === 200){\n                    setPayModal(false);\n                    setId('');\n                    async function fetchData() {\n                        const response = await fetch(url + 'fetchPurchaseList', {\n                            method: 'GET',\n                            headers: {\n                                'Authorization': user?.token\n                            }\n                        })\n                        if (response.ok === true) {\n                            const data = await response.json();\n                            setLoad(false)\n                            if (data.status === 200) {\n                                setPurchaseList(data.list.map((item,index)=>{\n                                    return{\n                                       '#': index+1,\n                                       'id': item.id,\n                                       'invoice_number': item.invoice_number,\n                                       'party_name': item.party_name,\n                                       'warehouse_name': item.warehouse_name,\n                                       'purchase_date': formatDate(item.purchase_date.split(' ')[0]),\n                                       'total_supply': item.total_supply,\n                                       'remain_amount': item.remain_amount\n                                    }\n                                }));\n                                setTotal(parseInt(data.total_records));\n                            } else {\n                                toast.error(data.message);\n                            }\n                        }\n                    }\n                    fetchData();\n                }else{\n                    toast.error(data.message);\n                }\n            }\n        }\n        payBillServer();\n    }\n\n    const payModal = (item,id) => {\n        setPayAmount(parseFloat(item.remain_amount))\n        setPayModal(true);\n        setId(id);\n    }\n\n    const deleteEntry = () => {\n        setLoad(true)\n        async function deleteData() {\n            const response = await fetch(url + 'deletePurchase/' + id, {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n\n            const data = await response.json();\n            \n            if (data.status === 200) {\n                setModal(false);\n                setId('');\n                async function fetchData() {\n                    const response = await fetch(url + 'fetchPurchaseList', {\n                        method: 'GET',\n                        headers: {\n                            'Authorization': user?.token\n                        }\n                    })\n        \n                    if (response.ok === true) {\n                        const data = await response.json();\n                        setLoad(false)\n                        if (data.status === 200) {\n                            setPurchaseList(data.list.map((item,index)=>{\n                                return{\n                                   '#': index+1,\n                                   'id': item.id,\n                                   'invoice_number': item.invoice_number,\n                                   'party_name': item.party_name,\n                                   'warehouse_name': item.warehouse_name,\n                                   'purchase_date': formatDate(item.purchase_date.split(' ')[0]),\n                                   'total_supply': item.total_supply,\n                                   'remain_amount': item.remain_amount\n                                }\n                            }));\n                            setTotal(parseInt(data.total_records));\n                        } else {\n                            toast.error(data.message);\n                        }\n                    }\n                }\n        \n                fetchData();\n            } else {\n                toast.error(data.message)\n            }\n        }\n        deleteData();\n    }\n\n    React.useEffect(() => {\n        setLoad(true)\n        async function fetchData() {\n            const response = await fetch(url + 'fetchPurchaseList', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n\n            if (response.ok === true) {\n                const data = await response.json();\n                setLoad(false)\n                if (data.status === 200) {\n                    setPurchaseList(data.list.map((item,index)=>{\n                        return{\n                           '#': index+1,\n                           'id': item.id,\n                           'invoice_number': item.invoice_number,\n                           'party_name': item.party_name,\n                           'warehouse_name': item.warehouse_name,\n                           'purchase_date': formatDate(item.purchase_date.split(' ')[0]),\n                           'total_supply': item.total_supply,\n                           'remain_amount': item.remain_amount\n                        }\n                    }));\n                    setTotal(parseInt(data.total_records));\n                } else {\n                    toast.error(data.message);\n                }\n            }\n        }\n\n        fetchData();\n        \n    }, [])\n\n    function handleSubmit(e){\n        e.preventDefault();\n        if (to_Date && from_Date){\n            setLoad(true)\n            async function submit(){\n                const response = await fetch(url + `fetchPurchaseList?to=${to_Date}&from=${from_Date}`,{\n                    method : 'GET',\n                    headers : {\n                        'Authorization' : user?.token\n                    }\n                });\n                 \n                if (response.ok === true){\n                    const data = await response.json();\n                    setLoad(false)\n                    if (data.status === 200){\n                        setPurchaseList(data.list.map((item,index)=>{\n                            return{\n                               '#': index+1,\n                               'id': item.id,\n                               'invoice_number': item.invoice_number,\n                               'party_name': item.party_name,\n                               'warehouse_name': item.warehouse_name,\n                               'purchase_date': formatDate(item.purchase_date.split(' ')[0]),\n                               'total_supply': item.total_supply,\n                               'remain_amount': item.remain_amount\n                            }\n                        }));\n                        setTotal(parseInt(data.total_records));\n                    }else{\n                        toast.error(data.message)\n                    }\n                }else{\n                    toast.error('Oops something went wrong!')\n                }\n            }\n            submit().catch(err=>toast.error('Internal server error!. Please try again later'))\n        }else{\n            toast.error('Please fill the to and from date')\n        }\n    }\n    \n    const columns = [\n        {\n            key: \"#\",\n            text: \"#\",\n            className: \"#\",\n            sortable: false,\n        },\n        {\n            key: \"invoice_number\",\n            text: \"Invoice Number\",\n            className: \"invoice_number\",\n            sortable: true\n        },\n        {\n            key: \"purchase_date\",\n            text: \"Purchase Date\",\n            className: \"purchase_date\",\n            sortable: true\n        },\n        {\n            key: \"warehouse_name\",\n            text: \"Warehouse Name\",\n            className: \"warehouse_name\",\n            sortable: true\n        },\n        {\n            key: \"party_name\",\n            text: \"Party Name\",\n            className: \"party_name\",\n            sortable: true\n        },\n        {\n            key: \"total_supply\",\n            text: \"Bill Amount\",\n            className: \"bill_amount\",\n            sortable: true\n        },\n        {\n            key: \"remain_amount\",\n            text: \"Remain Amount\",\n            className: \"remain_amount\",\n            sortable: true\n        },\n        {\n            key: \"action\",\n            text: \"Action\",\n            className: \"action\",\n            width: 100,\n            sortable: false,\n            cell: record => { \n                return (\n                    <Fragment>\n                        {parseFloat(record.remain_amount) !== 0 && <i \n                            style={{cursor:'pointer'}} \n                            onClick={()=>payModal(record,record.id)} \n                            className=\"fa fa-money mr-2\" \n                            aria-hidden=\"true\">  \n                       </i>\n                        }\n                        <Link\n                            to={`/edit/purchase/${record.id}`} \n                            style={{marginRight: '5px'}}>    \n                            <i className=\"fa fa-pencil mr-2\"></i>\n                        </Link>\n                        <i \n                        style={{ cursor: \"pointer\" }} \n                        onClick={() => showModal(record.id)} \n                        class=\"fa fa-trash\" \n                        aria-hidden=\"true\">   \n                        </i>\n                    </Fragment>\n                );\n            }\n        }\n    ];\n    const config = {\n        page_size: 10,\n        length_menu: [ 10, 20, 50 ],\n        button: {\n            excel: false,\n            print: false,\n            extra: false,\n        }\n    }\n    \n    const showModal = value => {\n        setId(value);\n        setModal(true)\n    }\n\n    async function fetchData(query) {\n        setLoad(true);\n        const response = await fetch(url + query, {\n            method: 'GET',\n            headers: {\n                'Authorization': user?.token\n            }\n        })\n        if (response.ok === true) {\n            const data = await response.json();\n            setLoad(false)\n            if (data.status === 200) {\n                setPurchaseList(data.list.map((item,index)=>{\n                    return{\n                       '#': index+1,\n                       'id': item.id,\n                       'party_name': item.party_name,\n                       'warehouse_name': item.warehouse_name,\n                       'purchase_date': formatDate(item.purchase_date.split(' ')[0]),\n                       'total_supply': item.total_supply,\n                       'discount_amount': parseFloat(item.bill_discount_percentage)? `${item.bill_discount_percentage}%` : item.bill_discount_amount,\n                       'amount_paid': item.amount_paid,\n                       'remain_amount': item.remain_amount\n                    }\n                }));\n                setTotal(parseInt(data.total_records));\n            } else {\n                toast.error(data.message);\n            }\n        }\n    }\n    const handleChange=(e)=>{\n        let query=`fetchPurchaseList?page_number=${e.page_number}&page_size=${e.page_size}&filter_value=${e.filter_value}&to=${to_Date}&from=${from_Date}`;\n        if(e.sort_order){\n            let sort = JSON.stringify(e.sort_order);\n            query=`fetchPurchaseList?page_number=${e.page_number}&page_size=${e.page_size}&filter_value=${e.filter_value}&sort_order=${sort}&to=${to_Date}&from=${from_Date}`;\n        }\n        fetchData(query);\n    }\n    return (\n        <section>\n            <ToastContainer />\n            <CustomModal modal={modal} setModal={setModal} deleteEntry={deleteEntry} />\n            <PayModal paymodal={paymodal} setPayModal={setPayModal} payAmount={payAmount} setPayAmount={setPayAmount} paymentMode={paymentMode} payBill={payBill} setPaymentMode={setPaymentMode}  />\n            <form onSubmit={e=>handleSubmit(e)}>\n            <div class=\"form-row create-purchase-header\">\n            <div class=\"form-group col-md-3\">\n            <label for=\"date\">From</label>\n            <input value={from_Date} onChange={e => setFromDate(e.target.value)} type=\"date\" class=\"form-control\" id=\"date\" required />\n            </div>\n            <div class=\"form-group col-md-3\">\n            <label for=\"date\">To</label>\n            <input value={to_Date} onChange={e => setToDate(e.target.value)} type=\"date\" class=\"form-control\" id=\"date\" required />\n            </div>\n            <div class=\"form-group col-md-3\">\n            <button type=\"Submit\" class=\"font-weight-bold my-4 py-2 px-4 btn btn-success\">Filter</button>\n            </div>\n            </div>\n            </form>\n            <ReactDatatable\n                    config={config}\n                    records={purchaseList}\n                    columns={columns}\n                    total_record={total}\n                    onChange={(e)=>handleChange(e)}\n                    dynamic={true}\n                />            \n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}