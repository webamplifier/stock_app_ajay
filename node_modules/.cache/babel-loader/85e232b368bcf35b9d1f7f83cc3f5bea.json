{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import Select from'react-select';import{url}from'src/helpers/helpers';import{userContext}from'../../context/UserContext';import{toast,ToastContainer}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Create(){var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),expense_date=_React$useState2[0],setExpenseDate=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),allemployees=_React$useState6[0],setAllEmployees=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),currentEmployee=_React$useState8[0],setCurrentEmployee=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),allPaymentMethods=_React$useState10[0],setAllPaymentMethods=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),currentPaymentMethod=_React$useState12[0],setCurrentPaymentMethod=_React$useState12[1];var _React$useState13=React.useState(''),_React$useState14=_slicedToArray(_React$useState13,2),item=_React$useState14[0],setItem=_React$useState14[1];var _React$useState15=React.useState('0'),_React$useState16=_slicedToArray(_React$useState15,2),paid_amount=_React$useState16[0],setPaidAmount=_React$useState16[1];var _React$useState17=React.useState(''),_React$useState18=_slicedToArray(_React$useState17,2),remarks=_React$useState18[0],setRemarks=_React$useState18[1];var _React$useState19=React.useState(''),_React$useState20=_slicedToArray(_React$useState19,2),condition=_React$useState20[0],setCondition=_React$useState20[1];React.useEffect(function(){function fetchPaymentMethods(){return _fetchPaymentMethods.apply(this,arguments);}function _fetchPaymentMethods(){_fetchPaymentMethods=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return fetch(url+'getPaymentMethods',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setLoad(false);setAllPaymentMethods(data===null||data===void 0?void 0:data.payment_methods.map(function(item){return{label:item};}));case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchPaymentMethods.apply(this,arguments);}fetchPaymentMethods();function fetchEmployees(){return _fetchEmployees.apply(this,arguments);}function _fetchEmployees(){_fetchEmployees=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoad(true);_context2.next=3;return fetch(url+'employeelist',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context2.sent;if(!(response.ok===true)){_context2.next=10;break;}_context2.next=7;return response.json();case 7:data=_context2.sent;setLoad(false);if(data.status===200){setAllEmployees(data===null||data===void 0?void 0:data.employee_list.map(function(item){return{value:item.id,label:item.name};}));}else{toast.error(data.message);}case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchEmployees.apply(this,arguments);}fetchEmployees();},[]);var handleSubmit=function handleSubmit(e){setLoad(true);e.preventDefault();function submitData(){return _submitData.apply(this,arguments);}function _submitData(){_submitData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var formData,response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(paid_amount&&item&&condition&&currentPaymentMethod)){_context3.next=14;break;}formData=new FormData();if(condition==='salary'){formData.append('expense_date',expense_date);formData.append('condition',condition);formData.append('name',currentEmployee.label);formData.append('employee_id',currentEmployee.value);formData.append('payment_method',currentPaymentMethod.label);formData.append('paid_amount',paid_amount);formData.append('item',item);formData.append('remarks',remarks);}else{formData.append('expense_date',expense_date);formData.append('condition',condition);formData.append('name',name);formData.append('payment_method',currentPaymentMethod.label);formData.append('paid_amount',paid_amount);formData.append('item',item);formData.append('remarks',remarks);}_context3.next=5;return fetch(url+'createexpense',{method:'POST',headers:{'Authorization':user===null||user===void 0?void 0:user.token},body:formData});case 5:response=_context3.sent;if(!(response.ok===true)){_context3.next=12;break;}_context3.next=9;return response.json();case 9:data=_context3.sent;setLoad(false);if(data.status===200){toast.success(data.message);setExpenseDate('');setCondition('');setName('');setCurrentEmployee('');setCurrentPaymentMethod('');setItem('');setPaidAmount(0);setRemarks('');}else{toast.error(data.message);}case 12:_context3.next=15;break;case 14:toast.error('Please fill the data with *');case 15:case\"end\":return _context3.stop();}}},_callee3);}));return _submitData.apply(this,arguments);}submitData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"container create-page-main-section\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-sm-5 create-form-field\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputDate\",class:\"col-sm-2 col-form-label\",children:\"Expense Date\"}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:expense_date,onChange:function onChange(e){return setExpenseDate(e.target.value);},type:\"date\",class:\"form-control\",id:\"inputDate\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputname\",class:\"col-sm-2 col-form-label\",children:[\"Condition\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsxs(\"select\",{value:condition,onChange:function onChange(e){return setCondition(e.target.value);},class:\"form-control\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Condition\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"salary\",children:\"Salary\"})]})})]}),condition==='expense'?/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputname\",class:\"col-sm-2 col-form-label\",children:[\"To:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{required:true,value:name,onChange:function onChange(e){return setName(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputname\"})})]}):null,condition==='salary'?/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputname\",class:\"col-sm-2 col-form-label\",children:[\"To:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10\",children:/*#__PURE__*/_jsx(Select,{options:allemployees,value:currentEmployee,onChange:setCurrentEmployee})})]}):null,/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputItem\",class:\"col-sm-2 col-form-label\",children:[\"Item\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{required:true,value:item,onChange:function onChange(e){return setItem(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputItem\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputItem\",class:\"col-sm-2 col-form-label\",children:[\"Payment Method\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10\",children:/*#__PURE__*/_jsx(Select,{options:allPaymentMethods,value:currentPaymentMethod,onChange:setCurrentPaymentMethod})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPrice\",class:\"col-sm-2 col-form-label\",children:[\"Paid Amount\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{required:true,value:paid_amount,onChange:function onChange(e){return setPaidAmount(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPrice\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"col-sm-2 col-form-label\",for:\"exampleFormControlTextarea1\",children:\"Remarks:\"}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"textarea\",{value:remarks,onChange:function onChange(e){return setRemarks(e.target.value);},class:\"form-control\",id:\"exampleFormControlTextarea1\",rows:\"3\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"d-flex justify-content-center create-catagory-btns\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"reset\",class:\"font-weight-bold m-3 py-2 px-4 btn btn-danger\",onClick:function onClick(){return window.location.reload();},children:[\"Cancel\",/*#__PURE__*/_jsx(\"i\",{class:\"px-2 fa fa-times\",\"aria-hidden\":\"true\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",class:\"font-weight-bold m-3 py-2 px-4 btn btn-success\",children:[\"Save\",/*#__PURE__*/_jsx(\"i\",{class:\"px-2 fa fa-floppy-o\",\"aria-hidden\":\"true\"})]})]})]})]});}","map":{"version":3,"sources":["/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/src/screens/Expense/create.js"],"names":["React","Select","url","userContext","toast","ToastContainer","Create","useContext","user","setLoad","useState","expense_date","setExpenseDate","name","setName","allemployees","setAllEmployees","currentEmployee","setCurrentEmployee","allPaymentMethods","setAllPaymentMethods","currentPaymentMethod","setCurrentPaymentMethod","item","setItem","paid_amount","setPaidAmount","remarks","setRemarks","condition","setCondition","useEffect","fetchPaymentMethods","fetch","method","headers","token","response","json","data","payment_methods","map","label","fetchEmployees","ok","status","employee_list","value","id","error","message","handleSubmit","e","preventDefault","submitData","formData","FormData","append","body","success","target","window","location","reload"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Select from 'react-select';\nimport { url } from 'src/helpers/helpers';\nimport { userContext } from '../../context/UserContext'\nimport { toast, ToastContainer } from 'react-toastify';\n\nexport default function Create() {\n    const { user, setLoad } = React.useContext(userContext);\n    const [expense_date, setExpenseDate] = React.useState('');\n    const [name, setName] = React.useState('');\n    const [allemployees, setAllEmployees] = React.useState([]);\n    const [currentEmployee, setCurrentEmployee] = React.useState('');\n    const [allPaymentMethods, setAllPaymentMethods] = React.useState([]);\n    const [currentPaymentMethod, setCurrentPaymentMethod] = React.useState('');\n    const [item, setItem] = React.useState('');\n    const [paid_amount, setPaidAmount] = React.useState('0');\n    const [remarks, setRemarks] = React.useState('');\n    const [condition, setCondition] = React.useState('');\n\n    React.useEffect(() => {\n        async function fetchPaymentMethods() {\n            setLoad(true);\n            const response = await fetch(url + 'getPaymentMethods', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n            const data = await response.json();\n            setLoad(false);\n            setAllPaymentMethods(data?.payment_methods.map(item => {\n                return {\n                    label: item\n                }\n            }))\n        }\n        fetchPaymentMethods();\n        \n        async function fetchEmployees() {\n            setLoad(true);\n            const response = await fetch(url + 'employeelist', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n\n            if (response.ok === true) {\n                const data = await response.json();\n                setLoad(false)\n                if (data.status === 200) {\n                    setAllEmployees(data?.employee_list.map(item => {\n                        return {\n                            value: item.id,\n                            label: item.name\n                        }\n                    }))\n                } else {\n                    toast.error(data.message)\n                }\n            }\n        }\n        fetchEmployees();\n    }, [])\n\n\n    const handleSubmit = e => {\n        setLoad(true)\n        e.preventDefault();\n\n        async function submitData() {\n            if (paid_amount && item && condition && currentPaymentMethod) {\n                const formData = new FormData();\n                if (condition === 'salary') {\n                    formData.append('expense_date', expense_date);\n                    formData.append('condition', condition);\n                    formData.append('name', currentEmployee.label);\n                    formData.append('employee_id', currentEmployee.value);\n                    formData.append('payment_method', currentPaymentMethod.label);\n                    formData.append('paid_amount', paid_amount);\n                    formData.append('item', item);\n                    formData.append('remarks', remarks);\n                }\n                else {\n                    formData.append('expense_date', expense_date);\n                    formData.append('condition', condition);\n                    formData.append('name', name);\n                    formData.append('payment_method', currentPaymentMethod.label);\n                    formData.append('paid_amount', paid_amount);\n                    formData.append('item', item);\n                    formData.append('remarks', remarks);\n                }\n\n                const response = await fetch(url + 'createexpense', {\n                    method: 'POST',\n                    headers: {\n                        'Authorization': user?.token\n                    },\n                    body: formData\n                })\n\n                if (response.ok === true) {\n                    const data = await response.json();\n                    setLoad(false);\n                    if (data.status === 200) {\n                        toast.success(data.message);\n                        setExpenseDate('');\n                        setCondition('');\n                        setName('');\n                        setCurrentEmployee('');\n                        setCurrentPaymentMethod('');\n                        setItem('');\n                        setPaidAmount(0);\n                        setRemarks('');\n                    } else {\n                        toast.error(data.message)\n                    }\n                }\n            }\n            else {\n                toast.error('Please fill the data with *');\n            }\n        }\n        submitData();\n    }\n\n    return (\n        <div className=\"container create-page-main-section\">\n            <ToastContainer />\n            <form onSubmit={e => handleSubmit(e)}>\n                <div className='p-sm-5 create-form-field'>\n                    <div class=\"form-group row\">\n                        <label for=\"inputDate\" class=\"col-sm-2 col-form-label\">Expense Date</label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={expense_date} onChange={e => setExpenseDate(e.target.value)} type=\"date\" class=\"form-control\" id=\"inputDate\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputname\" class=\"col-sm-2 col-form-label\">Condition<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <select value={condition} onChange={e => setCondition(e.target.value)} class=\"form-control\" required>\n                                <option value=\"\">Select Condition</option>\n                                <option value='expense'>Expense</option>\n                                <option value='salary'>Salary</option>\n                            </select>\n                        </div>\n                    </div>\n                    {condition === 'expense' ?\n                        <div class=\"form-group row\">\n                            <label for=\"inputname\" class=\"col-sm-2 col-form-label\">To:<span className='required-label'>*</span></label>\n                            <div class=\"d-flex align-items-sm-center col-sm-10\">\n                                <input required value={name} onChange={e => setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputname\" />\n                            </div>\n                        </div> : null}\n                    {condition === 'salary' ?\n                        <div class=\"form-group row\">\n                            <label for=\"inputname\" class=\"col-sm-2 col-form-label\">To:<span className='required-label'>*</span></label>\n                            <div class=\"col-sm-10\">\n                                <Select options={allemployees} value={currentEmployee} onChange={setCurrentEmployee} />\n                            </div>\n                        </div> : null}\n                    <div class=\"form-group row\">\n                        <label for=\"inputItem\" class=\"col-sm-2 col-form-label\">Item<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input required value={item} onChange={e => setItem(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputItem\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputItem\" class=\"col-sm-2 col-form-label\">Payment Method<span className='required-label'>*</span></label>\n                        <div class=\"col-sm-10\">\n                                <Select options={allPaymentMethods} value={currentPaymentMethod} onChange={setCurrentPaymentMethod} />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPrice\" class=\"col-sm-2 col-form-label\">Paid Amount<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input required value={paid_amount} onChange={e => setPaidAmount(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPrice\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlTextarea1\">Remarks:</label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <textarea value={remarks} onChange={e => setRemarks(e.target.value)} class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\"></textarea>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\n                    <button type=\"reset\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\" onClick={() => window.location.reload()} >Cancel<i\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\n                </div>\n            </form>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}