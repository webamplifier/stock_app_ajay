{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import Select from'react-select';import{url}from'src/helpers/helpers';import{userContext}from'../../context/UserContext';import{toast,ToastContainer}from'react-toastify';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Edit(){var _useParams=useParams(),id=_useParams.id;var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),expense_date=_React$useState2[0],setExpenseDate=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),allemployees=_React$useState6[0],setAllEmployees=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),currentEmployee=_React$useState8[0],setCurrentEmployee=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),allPaymentMethods=_React$useState10[0],setAllPaymentMethods=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),currentPaymentMethod=_React$useState12[0],setCurrentPaymentMethod=_React$useState12[1];var _React$useState13=React.useState(''),_React$useState14=_slicedToArray(_React$useState13,2),item=_React$useState14[0],setItem=_React$useState14[1];var _React$useState15=React.useState(0),_React$useState16=_slicedToArray(_React$useState15,2),paid_amount=_React$useState16[0],setPaidAmount=_React$useState16[1];var _React$useState17=React.useState(''),_React$useState18=_slicedToArray(_React$useState17,2),remarks=_React$useState18[0],setRemarks=_React$useState18[1];var _React$useState19=React.useState(''),_React$useState20=_slicedToArray(_React$useState19,2),condition=_React$useState20[0],setCondition=_React$useState20[1];React.useEffect(function(){function fetchPaymentMethods(){return _fetchPaymentMethods.apply(this,arguments);}function _fetchPaymentMethods(){_fetchPaymentMethods=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return fetch(url+'getPaymentMethods',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setLoad(false);setAllPaymentMethods(data===null||data===void 0?void 0:data.payment_methods.map(function(item){return{label:item};}));case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchPaymentMethods.apply(this,arguments);}fetchPaymentMethods();function fetchEmployees(){return _fetchEmployees.apply(this,arguments);}function _fetchEmployees(){_fetchEmployees=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoad(true);_context2.next=3;return fetch(url+'employeelist',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context2.sent;if(!(response.ok===true)){_context2.next=10;break;}_context2.next=7;return response.json();case 7:data=_context2.sent;setLoad(false);if(data.status===200){setAllEmployees(data===null||data===void 0?void 0:data.employee_list.map(function(item){return{value:item.id,label:item.name};}));}else{toast.error(data.message);}case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchEmployees.apply(this,arguments);}fetchEmployees();function fetchExpenseData(){return _fetchExpenseData.apply(this,arguments);}function _fetchExpenseData(){_fetchExpenseData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data,expense_detail;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoad(true);_context3.next=3;return fetch(url+'expenseById/'+id,{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context3.sent;if(!(response.ok===true)){_context3.next=10;break;}_context3.next=7;return response.json();case 7:data=_context3.sent;setLoad(false);if(data.status===200){expense_detail=data.expense_detail;if(expense_detail.condition==='salary'){setCondition(expense_detail.condition);setCurrentEmployee({value:expense_detail.employee_id,label:expense_detail.name});setCurrentPaymentMethod({label:expense_detail.payment_method});setPaidAmount(expense_detail.paid_amount);setItem(expense_detail.item_name);setExpenseDate(expense_detail.expense_date);setRemarks(expense_detail.remarks);}else{setCondition(expense_detail.condition);setName(expense_detail.name);setPaidAmount(expense_detail.paid_amount);setCurrentPaymentMethod({label:expense_detail.payment_method});setItem(expense_detail.item_name);setExpenseDate(expense_detail.expense_date);setRemarks(expense_detail.remarks);}}else{toast.error(data.message);}case 10:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchExpenseData.apply(this,arguments);}fetchExpenseData();},[]);var handleChange=function handleChange(e){setCondition(e.target.value);if(e.target.value===\"salary\"){setItem(\"salary\");}};var handleSubmit=function handleSubmit(e){setLoad(true);e.preventDefault();function submitData(){return _submitData.apply(this,arguments);}function _submitData(){_submitData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var formData,response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(paid_amount&&item&&condition)){_context4.next=18;break;}formData=new FormData();if(condition==='salary'){formData.append('expense_date',expense_date);formData.append('condition',condition);formData.append('name',currentEmployee.label);formData.append('employee_id',currentEmployee.value);formData.append('paid_amount',paid_amount);formData.append('payment_method',currentPaymentMethod.label);formData.append('item',item);formData.append('remarks',remarks);}else{formData.append('expense_date',expense_date);formData.append('condition',condition);formData.append('name',name);formData.append('payment_method',currentPaymentMethod.label);formData.append('paid_amount',paid_amount);formData.append('item',item);formData.append('remarks',remarks);}_context4.next=5;return fetch(url+'updateexpense/'+id,{method:'POST',headers:{'Authorization':user===null||user===void 0?void 0:user.token},body:formData});case 5:response=_context4.sent;if(!(response.ok===true)){_context4.next=16;break;}_context4.next=9;return response.json();case 9:data=_context4.sent;setLoad(false);if(!(data.status===200)){_context4.next=15;break;}return _context4.abrupt(\"return\",window.location=window.location.origin+'/#/expenseReport');case 15:toast.error(data.message);case 16:_context4.next=19;break;case 18:toast.error('Please fill the data with *');case 19:case\"end\":return _context4.stop();}}},_callee4);}));return _submitData.apply(this,arguments);}submitData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"container create-page-main-section\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-sm-5 create-form-field\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputDate\",class:\"col-sm-2 col-form-label\",children:\"Expense Date\"}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:expense_date,onChange:function onChange(e){return setExpenseDate(e.target.value);},type:\"date\",class:\"form-control\",id:\"inputDate\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputname\",class:\"col-sm-2 col-form-label\",children:[\"Condition\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsxs(\"select\",{value:condition,onChange:function onChange(e){return handleChange(e);},class:\"form-control\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Condition\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"salary\",children:\"Salary\"})]})})]}),condition==='expense'?/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputname\",class:\"col-sm-2 col-form-label\",children:[\"To:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{required:true,value:name,onChange:function onChange(e){return setName(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputname\"})})]}):null,condition==='salary'?/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputname\",class:\"col-sm-2 col-form-label\",children:[\"To:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10\",children:/*#__PURE__*/_jsx(Select,{options:allemployees,value:currentEmployee,onChange:setCurrentEmployee})})]}):null,/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputItem\",class:\"col-sm-2 col-form-label\",children:[\"Item\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{required:true,value:item,onChange:function onChange(e){return setItem(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputItem\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputItem\",class:\"col-sm-2 col-form-label\",children:[\"Payment Method\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10\",children:currentPaymentMethod.label===\"cash\"?/*#__PURE__*/_jsx(Select,{options:allPaymentMethods,value:currentPaymentMethod,onChange:setCurrentPaymentMethod}):/*#__PURE__*/_jsx(Select,{options:allPaymentMethods,value:currentPaymentMethod})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPrice\",class:\"col-sm-2 col-form-label\",children:[\"Paid Amount\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{required:true,value:paid_amount,onChange:function onChange(e){return setPaidAmount(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPrice\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{class:\"col-sm-2 col-form-label\",for:\"exampleFormControlTextarea1\",children:\"Remarks:\"}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"textarea\",{value:remarks,onChange:function onChange(e){return setRemarks(e.target.value);},class:\"form-control\",id:\"exampleFormControlTextarea1\",rows:\"3\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"d-flex justify-content-center create-catagory-btns\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"reset\",class:\"font-weight-bold m-3 py-2 px-4 btn btn-danger\",onClick:function onClick(){return window.location.reload();},children:[\"Cancel\",/*#__PURE__*/_jsx(\"i\",{class:\"px-2 fa fa-times\",\"aria-hidden\":\"true\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",class:\"font-weight-bold m-3 py-2 px-4 btn btn-success\",children:[\"Save\",/*#__PURE__*/_jsx(\"i\",{class:\"px-2 fa fa-floppy-o\",\"aria-hidden\":\"true\"})]})]})]})]});}","map":{"version":3,"sources":["/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/src/screens/Expense/Edit.js"],"names":["React","Select","url","userContext","toast","ToastContainer","useParams","Edit","id","useContext","user","setLoad","useState","expense_date","setExpenseDate","name","setName","allemployees","setAllEmployees","currentEmployee","setCurrentEmployee","allPaymentMethods","setAllPaymentMethods","currentPaymentMethod","setCurrentPaymentMethod","item","setItem","paid_amount","setPaidAmount","remarks","setRemarks","condition","setCondition","useEffect","fetchPaymentMethods","fetch","method","headers","token","response","json","data","payment_methods","map","label","fetchEmployees","ok","status","employee_list","value","error","message","fetchExpenseData","expense_detail","employee_id","payment_method","item_name","handleChange","e","target","handleSubmit","preventDefault","submitData","formData","FormData","append","body","window","location","origin","reload"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Select from 'react-select';\nimport { url } from 'src/helpers/helpers';\nimport {userContext} from '../../context/UserContext'\nimport { toast,ToastContainer } from 'react-toastify';\nimport {useParams} from 'react-router-dom';\n\nexport default function Edit() {\n    const {id} = useParams();\n    const {user,setLoad} = React.useContext(userContext);    \n    const [expense_date, setExpenseDate] = React.useState('');\n    const [name, setName] = React.useState('');\n    const [allemployees, setAllEmployees] = React.useState('');\n    const [currentEmployee, setCurrentEmployee] = React.useState('');\n    const [allPaymentMethods, setAllPaymentMethods] = React.useState([]);\n    const [currentPaymentMethod, setCurrentPaymentMethod] = React.useState('');\n    const [item,setItem] = React.useState('');\n    const [paid_amount,setPaidAmount] = React.useState(0);\n    const [remarks,setRemarks] = React.useState('');\n    const [condition, setCondition] = React.useState('');\n    \n    React.useEffect(()=>{\n        async function fetchPaymentMethods() {\n            setLoad(true);\n            const response = await fetch(url + 'getPaymentMethods', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n            const data = await response.json();\n            setLoad(false);\n            setAllPaymentMethods(data?.payment_methods.map(item => {\n                return {\n                    label: item\n                }\n            }))\n        }\n        fetchPaymentMethods();\n        \n        async function fetchEmployees(){\n            setLoad(true);\n            const response = await fetch(url + 'employeelist', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n    \n            if (response.ok === true) {\n                const data = await response.json();\n                setLoad(false)\n                if (data.status === 200) {\n                    setAllEmployees(data?.employee_list.map(item => {\n                        return {\n                           value: item.id, \n                           label: item.name\n                        }\n                    }))\n                } else {\n                    toast.error(data.message)\n                }\n            }\n        }\n           fetchEmployees();\n        \n        async function fetchExpenseData(){\n            setLoad(true);\n            const response = await fetch(url + 'expenseById/' + id,{\n                method : 'GET',\n                headers : {\n                    'Authorization' : user?.token\n                }\n            })\n            if (response.ok === true){\n                const data = await response.json();\n                setLoad(false);\n                if (data.status === 200){\n                    let expense_detail = data.expense_detail;\n                    if(expense_detail.condition==='salary'){\n                        setCondition(expense_detail.condition);\n                        setCurrentEmployee({\n                            value: expense_detail.employee_id,\n                            label: expense_detail.name\n                        });\n                        setCurrentPaymentMethod({\n                            label: expense_detail.payment_method\n                        })\n                        setPaidAmount(expense_detail.paid_amount);\n                        setItem(expense_detail.item_name);\n                        setExpenseDate(expense_detail.expense_date);\n                        setRemarks(expense_detail.remarks);\n                    }\n                    else{\n                        setCondition(expense_detail.condition);\n                        setName(expense_detail.name)\n                        setPaidAmount(expense_detail.paid_amount);\n                        setCurrentPaymentMethod({\n                            label: expense_detail.payment_method\n                        })\n                        setItem(expense_detail.item_name);\n                        setExpenseDate(expense_detail.expense_date);\n                        setRemarks(expense_detail.remarks);\n                    }\n                }else{\n                    toast.error(data.message)\n                }\n            }\n        }\n        fetchExpenseData();\n    },[])\n    \n    const handleChange = e =>{\n        setCondition(e.target.value);\n        if(e.target.value === \"salary\"){\n            setItem(\"salary\");\n        }\n    }\n    \n    const handleSubmit = e => {\n        setLoad(true)\n        e.preventDefault();\n        \n        async function submitData(){\n            if( paid_amount && item && condition)\n           {  \n            const formData = new FormData();\n            if(condition==='salary'){\n                formData.append('expense_date', expense_date);\n                formData.append('condition', condition);\n                formData.append('name', currentEmployee.label);\n                formData.append('employee_id', currentEmployee.value);\n                formData.append('paid_amount', paid_amount);\n                formData.append('payment_method', currentPaymentMethod.label);\n                formData.append('item', item);\n                formData.append('remarks', remarks);\n                }\n                else{\n                formData.append('expense_date', expense_date);\n                formData.append('condition', condition);\n                formData.append('name', name);\n                formData.append('payment_method', currentPaymentMethod.label);\n                formData.append('paid_amount', paid_amount);\n                formData.append('item', item);\n                formData.append('remarks', remarks);\n                }\n            const response = await fetch(url + 'updateexpense/' + id,{\n                method : 'POST',\n                headers : {\n                    'Authorization' : user?.token\n                },\n                body : formData\n            })\n\n            if (response.ok === true){\n                const data = await response.json();\n                setLoad(false);\n                if (data.status === 200){\n                    return window.location = window.location.origin + '/#/expenseReport';\n                }else{\n                    toast.error(data.message)\n                }\n            }\n        }\n        else{\n            toast.error('Please fill the data with *');\n         }\n        } \n        submitData();\n    }\n\n    return (\n        <div className=\"container create-page-main-section\">\n            <ToastContainer />\n            <form onSubmit={e=>handleSubmit(e)}>\n                <div className='p-sm-5 create-form-field'>\n                    <div class=\"form-group row\">\n                        <label for=\"inputDate\" class=\"col-sm-2 col-form-label\">Expense Date</label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={expense_date} onChange={e=>setExpenseDate(e.target.value)} type=\"date\" class=\"form-control\" id=\"inputDate\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputname\" class=\"col-sm-2 col-form-label\">Condition<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <select value={condition} onChange={e => handleChange(e)} class=\"form-control\" required>\n                                    <option value=\"\">Select Condition</option>\n                                    <option value='expense'>Expense</option>\n                                    <option value='salary'>Salary</option>\n                        </select>\n                        </div>\n                    </div>\n                    {condition ==='expense'?\n                     <div class=\"form-group row\">\n                     <label for=\"inputname\" class=\"col-sm-2 col-form-label\">To:<span className='required-label'>*</span></label>\n                     <div class=\"d-flex align-items-sm-center col-sm-10\">\n                         <input required value={name} onChange={e=>setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputname\" />\n                     </div>\n                 </div> : null}\n                    {condition ==='salary'?\n                     <div class=\"form-group row\">\n                     <label for=\"inputname\" class=\"col-sm-2 col-form-label\">To:<span className='required-label'>*</span></label>\n                     <div class=\"col-sm-10\">\n                        <Select options={allemployees} value={currentEmployee} onChange={setCurrentEmployee} />\n                    </div>\n                 </div> : null}\n                    <div class=\"form-group row\">\n                        <label for=\"inputItem\" class=\"col-sm-2 col-form-label\">Item<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input required value={item} onChange={e=>setItem(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputItem\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputItem\" class=\"col-sm-2 col-form-label\">Payment Method<span className='required-label'>*</span></label>\n                        <div class=\"col-sm-10\">\n                        {currentPaymentMethod.label === \"cash\" ? <Select options={allPaymentMethods} value={currentPaymentMethod} onChange={setCurrentPaymentMethod}/>\n                                                              : <Select options={allPaymentMethods} value={currentPaymentMethod} />}  \n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPrice\" class=\"col-sm-2 col-form-label\">Paid Amount<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input required value={paid_amount} onChange={e=>setPaidAmount(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPrice\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label class=\"col-sm-2 col-form-label\" for=\"exampleFormControlTextarea1\">Remarks:</label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <textarea value={remarks} onChange={e => setRemarks(e.target.value)} class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\"></textarea>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\n                    <button type=\"reset\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\" onClick={() => window.location.reload()} >Cancel<i\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\n                </div>\n            </form>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}