{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import{CDropdown,CDropdownItem,CDropdownMenu,CDropdownToggle,CImg}from'@coreui/react';import CIcon from'@coreui/icons-react';import{userContext}from'../context/UserContext';import{url}from'src/helpers/helpers';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TheHeaderDropdown=function TheHeaderDropdown(){var _React$useContext=React.useContext(userContext),setUser=_React$useContext.setUser,user=_React$useContext.user;var logout=function logout(){setUser(null);return window.location=window.location.origin+'/#/login';};return/*#__PURE__*/_jsxs(CDropdown,{inNav:true,className:\"c-header-nav-items mx-2\",direction:\"down\",children:[/*#__PURE__*/_jsx(CDropdownToggle,{className:\"c-header-nav-link\",caret:false,children:/*#__PURE__*/_jsx(\"div\",{className:\"c-avatar\",children:/*#__PURE__*/_jsx(CImg,{src:'avatars/6.jpg',className:\"c-avatar-img\",alt:\"admin@bootstrapmaster.com\"})})}),/*#__PURE__*/_jsxs(CDropdownMenu,{className:\"pt-0\",placement:\"bottom-end\",children:[/*#__PURE__*/_jsx(CDropdownItem,{header:true,tag:\"div\",color:\"light\",className:\"text-center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Settings\"})}),/*#__PURE__*/_jsxs(CDropdownItem,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,formData,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:res=window.prompt(\"Enter New Password\");if(!(res.length>0)){_context.next=14;break;}formData=new FormData();formData.append(\"password\",res);_context.next=6;return fetch(url+'update-user-password',{method:\"POST\",headers:{\"Authorization\":user===null||user===void 0?void 0:user.token},body:formData});case 6:response=_context.sent;if(!(response.ok===true)){_context.next=12;break;}_context.next=10;return response.json();case 10:data=_context.sent;if(data.status==200){toast.success(data.message);}else{toast.error(data.message);}case 12:_context.next=14;break;case 14:case\"end\":return _context.stop();}}},_callee);})),children:[/*#__PURE__*/_jsx(CIcon,{name:\"cil-user\",className:\"mfe-2\"}),\"Change Password\"]}),/*#__PURE__*/_jsxs(CDropdownItem,{onClick:function onClick(){return logout();},children:[/*#__PURE__*/_jsx(CIcon,{name:\"cil-lock-locked\",className:\"mfe-2\"}),\"Logout\"]})]})]});};export default TheHeaderDropdown;","map":{"version":3,"sources":["/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/src/containers/TheHeaderDropdown.js"],"names":["React","CDropdown","CDropdownItem","CDropdownMenu","CDropdownToggle","CImg","CIcon","userContext","url","toast","TheHeaderDropdown","useContext","setUser","user","logout","window","location","origin","res","prompt","length","formData","FormData","append","fetch","method","headers","token","body","response","ok","json","data","status","success","message","error"],"mappings":"iQAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,SADF,CAEEC,aAFF,CAGEC,aAHF,CAIEC,eAJF,CAKEC,IALF,KAMO,eANP,CAOA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,OAAQC,WAAR,KAA0B,wBAA1B,CACA,OAASC,GAAT,KAAoB,qBAApB,CACA,OAASC,KAAT,KAAsB,gBAAtB,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B,sBAAuBV,KAAK,CAACW,UAAN,CAAiBJ,WAAjB,CAAvB,CAAOK,OAAP,mBAAOA,OAAP,CAAeC,IAAf,mBAAeA,IAAf,CACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBF,OAAO,CAAC,IAAD,CAAP,CACA,MAAOG,CAAAA,MAAM,CAACC,QAAP,CAAkBD,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAyB,UAAlD,CACD,CAHD,CAKA,mBACE,MAAC,SAAD,EACE,KAAK,KADP,CAEE,SAAS,CAAC,yBAFZ,CAGE,SAAS,CAAC,MAHZ,wBAKE,KAAC,eAAD,EAAiB,SAAS,CAAC,mBAA3B,CAA+C,KAAK,CAAE,KAAtD,uBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,IAAD,EACE,GAAG,CAAE,eADP,CAEE,SAAS,CAAC,cAFZ,CAGE,GAAG,CAAC,2BAHN,EADF,EADF,EALF,cAcE,MAAC,aAAD,EAAe,SAAS,CAAC,MAAzB,CAAgC,SAAS,CAAC,YAA1C,wBACE,KAAC,aAAD,EACE,MAAM,KADR,CAEE,GAAG,CAAC,KAFN,CAGE,KAAK,CAAC,OAHR,CAIE,SAAS,CAAC,aAJZ,uBAME,oCANF,EADF,cASE,MAAC,aAAD,EAAe,OAAO,sEAAE,kKAChBC,GADgB,CACVH,MAAM,CAACI,MAAP,CAAc,oBAAd,CADU,MAElBD,GAAG,CAACE,MAAJ,CAAa,CAFK,2BAGdC,QAHc,CAGH,GAAIC,CAAAA,QAAJ,EAHG,CAIpBD,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA2BL,GAA3B,EAJoB,sBAKGM,CAAAA,KAAK,CAAChB,GAAG,CAAG,sBAAP,CAA8B,CACxDiB,MAAM,CAAG,MAD+C,CAExDC,OAAO,CAAG,CACR,gBAAkBb,IAAlB,SAAkBA,IAAlB,iBAAkBA,IAAI,CAAEc,KADhB,CAF8C,CAKxDC,IAAI,CAAGP,QALiD,CAA9B,CALR,QAKdQ,QALc,oBAahBA,QAAQ,CAACC,EAAT,GAAgB,IAbA,kDAcCD,CAAAA,QAAQ,CAACE,IAAT,EAdD,SAcZC,IAdY,eAelB,GAAIA,IAAI,CAACC,MAAL,EAAe,GAAnB,CAAuB,CACrBxB,KAAK,CAACyB,OAAN,CAAcF,IAAI,CAACG,OAAnB,EACD,CAFD,IAEK,CACH1B,KAAK,CAAC2B,KAAN,CAAYJ,IAAI,CAACG,OAAjB,EACD,CAnBiB,sFAAF,EAAtB,wBAyBE,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,OAAjC,EAzBF,qBATF,cAoCE,MAAC,aAAD,EAAe,OAAO,CAAE,yBAAIrB,CAAAA,MAAM,EAAV,EAAxB,wBACE,KAAC,KAAD,EAAO,IAAI,CAAC,iBAAZ,CAA8B,SAAS,CAAC,OAAxC,EADF,YApCF,GAdF,GADF,CA0DD,CAjED,CAmEA,cAAeJ,CAAAA,iBAAf","sourcesContent":["import React from 'react'\nimport {\n  CDropdown,\n  CDropdownItem,\n  CDropdownMenu,\n  CDropdownToggle,\n  CImg\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport {userContext} from '../context/UserContext'\nimport { url } from 'src/helpers/helpers'\nimport { toast } from 'react-toastify'\n\nconst TheHeaderDropdown = () => {\n  const {setUser,user} = React.useContext(userContext);\n  const logout = () => {\n    setUser(null);\n    return window.location = window.location.origin + '/#/login'\n  }\n\n  return (\n    <CDropdown\n      inNav\n      className=\"c-header-nav-items mx-2\"\n      direction=\"down\"\n    >\n      <CDropdownToggle className=\"c-header-nav-link\" caret={false}>\n        <div className=\"c-avatar\">\n          <CImg\n            src={'avatars/6.jpg'}\n            className=\"c-avatar-img\"\n            alt=\"admin@bootstrapmaster.com\"\n          />\n        </div>\n      </CDropdownToggle>\n      <CDropdownMenu className=\"pt-0\" placement=\"bottom-end\">\n        <CDropdownItem\n          header\n          tag=\"div\"\n          color=\"light\"\n          className=\"text-center\"\n        >\n          <strong>Settings</strong>\n        </CDropdownItem>\n        <CDropdownItem onClick={async ()=>{\n          const res = window.prompt(\"Enter New Password\");\n          if (res.length > 0){\n            const formData = new FormData();\n            formData.append(\"password\",res);\n            const response = await fetch(url + 'update-user-password',{\n              method : \"POST\",\n              headers : {\n                \"Authorization\" : user?.token\n              },\n              body : formData\n            });\n\n            if (response.ok === true){\n              const data = await response.json();\n              if (data.status == 200){\n                toast.success(data.message)\n              }else{\n                toast.error(data.message)\n              }\n            }\n          }else{\n            // \n          }\n        }}>\n          <CIcon name=\"cil-user\" className=\"mfe-2\" />Change Password\n        </CDropdownItem>\n        <CDropdownItem onClick={()=>logout()}>\n          <CIcon name=\"cil-lock-locked\" className=\"mfe-2\" />\n          Logout\n        </CDropdownItem>\n      </CDropdownMenu>\n    </CDropdown>\n  )\n}\n\nexport default TheHeaderDropdown\n"]},"metadata":{},"sourceType":"module"}