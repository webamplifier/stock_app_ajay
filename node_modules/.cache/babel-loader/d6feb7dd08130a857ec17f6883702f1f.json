{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import Select from'react-select';import{url}from'src/helpers/helpers';import{userContext}from'../../context/UserContext';import{toast,ToastContainer}from'react-toastify';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Edit(){var _useParams=useParams(),id=_useParams.id;var _React$useContext=React.useContext(userContext),user=_React$useContext.user,setLoad=_React$useContext.setLoad;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),allcategories=_React$useState4[0],setAllCategories=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),currentCategory=_React$useState6[0],setCurrentCategory=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),type=_React$useState8[0],setType=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),unit=_React$useState10[0],setUnit=_React$useState10[1];var _React$useState11=React.useState(0),_React$useState12=_slicedToArray(_React$useState11,2),sales_unit=_React$useState12[0],setSalesUnit=_React$useState12[1];var _React$useState13=React.useState(1),_React$useState14=_slicedToArray(_React$useState13,2),pack_unit=_React$useState14[0],setPackUnit=_React$useState14[1];var _React$useState15=React.useState(0),_React$useState16=_slicedToArray(_React$useState15,2),price=_React$useState16[0],setPrice=_React$useState16[1];var _React$useState17=React.useState(''),_React$useState18=_slicedToArray(_React$useState17,2),hsbn=_React$useState18[0],setHSBN=_React$useState18[1];var _React$useState19=React.useState(''),_React$useState20=_slicedToArray(_React$useState19,2),serial_no=_React$useState20[0],setSerialNo=_React$useState20[1];React.useEffect(function(){function fetchCategory(){return _fetchCategory.apply(this,arguments);}function _fetchCategory(){_fetchCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return fetch(url+'categorylist',{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context.sent;if(!(response.ok===true)){_context.next=10;break;}_context.next=7;return response.json();case 7:data=_context.sent;setLoad(false);if(data.status===200){setAllCategories(data===null||data===void 0?void 0:data.category_list.map(function(item){return{value:item.id,label:item.name};}));}else{toast.error(data.message);}case 10:case\"end\":return _context.stop();}}},_callee);}));return _fetchCategory.apply(this,arguments);}fetchCategory();function fetchProductData(){return _fetchProductData.apply(this,arguments);}function _fetchProductData(){_fetchProductData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data,product_detail;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoad(true);_context2.next=3;return fetch(url+'productById/'+id,{method:'GET',headers:{'Authorization':user===null||user===void 0?void 0:user.token}});case 3:response=_context2.sent;if(!(response.ok===true)){_context2.next=10;break;}setLoad(false);_context2.next=8;return response.json();case 8:data=_context2.sent;if(data.status===200){product_detail=data.product_detail;setName(product_detail.name);setPrice(product_detail.price);setCurrentCategory({value:product_detail.category_id,label:product_detail.category_name});setHSBN(product_detail.hsbn);setSerialNo(product_detail.serial_no);setType(product_detail.type);setUnit(product_detail.unit);setSalesUnit(product_detail.sales_unit);setPackUnit(product_detail.pack_unit);}else{toast.error(data.message);}case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchProductData.apply(this,arguments);}fetchProductData();},[]);var handleSubmit=function handleSubmit(e){if(name&&price&&currentCategory&&unit){var submitData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(url+'updateproduct/'+id,{method:'POST',headers:{'Authorization':user===null||user===void 0?void 0:user.token},body:formData});case 2:response=_context3.sent;if(!(response.ok===true)){_context3.next=13;break;}setLoad(false);_context3.next=7;return response.json();case 7:data=_context3.sent;if(!(data.status===200)){_context3.next=12;break;}return _context3.abrupt(\"return\",window.location=window.location.origin+'/#/productList');case 12:toast.error(data.message);case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function submitData(){return _ref.apply(this,arguments);};}();setLoad(true);var formData=new FormData();formData.append('name',name);formData.append('price',price);formData.append('unit',unit);formData.append('type',type);formData.append('hsbn',hsbn);formData.append('serial_no',serial_no);formData.append('category_id',currentCategory.value);formData.append('category_name',currentCategory.label);formData.append('sales_unit',sales_unit);formData.append('pack_unit',pack_unit);submitData();}else{toast.error('Please fill the data with *');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container create-page-main-section\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-sm-5 create-form-field\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Name:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:name,onChange:function onChange(e){return setName(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPassword\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Category:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10\",children:/*#__PURE__*/_jsx(Select,{options:allcategories,value:currentCategory,onChange:setCurrentCategory})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Type:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:function onChange(e){return setType(e.target.value);},class:\"form-control\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"product\",children:\"Product\"}),/*#__PURE__*/_jsx(\"option\",{value:\"service\",children:\"Service\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Unit:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsxs(\"select\",{value:unit,onChange:function onChange(e){return setUnit(e.target.value);},class:\"form-control\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Unit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sq.Ft\",children:\"Sq.Ft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pcs\",children:\"Pcs\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Sales Unit:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:sales_unit,onChange:function onChange(e){return setSalesUnit(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPassword\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Pack Unit:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:pack_unit,onChange:function onChange(e){return setPackUnit(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPassword\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Price:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:price,onChange:function onChange(e){return setPrice(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPassword\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"HSBN:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:hsbn,onChange:function onChange(e){return setHSBN(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPassword\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group row\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"inputPassword\",class:\"col-sm-2 col-form-label\",children:[\"Serial No:\",/*#__PURE__*/_jsx(\"span\",{className:\"required-label\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"d-flex align-items-sm-center col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{value:serial_no,onChange:function onChange(e){return setSerialNo(e.target.value);},type:\"text\",class:\"form-control\",id:\"inputPassword\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"d-flex justify-content-center create-catagory-btns\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",class:\"font-weight-bold m-3 py-2 px-4 btn btn-danger\",children:[\"Cancel\",/*#__PURE__*/_jsx(\"i\",{class:\"px-2 fa fa-times\",\"aria-hidden\":\"true\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",class:\"font-weight-bold m-3 py-2 px-4 btn btn-success\",children:[\"Save\",/*#__PURE__*/_jsx(\"i\",{class:\"px-2 fa fa-floppy-o\",\"aria-hidden\":\"true\"})]})]})]})]});}","map":{"version":3,"sources":["/Volumes/Disk SSD/erp2.0/erp-2.0/frontend/src/screens/Products/edit.js"],"names":["React","Select","url","userContext","toast","ToastContainer","useParams","Edit","id","useContext","user","setLoad","useState","name","setName","allcategories","setAllCategories","currentCategory","setCurrentCategory","type","setType","unit","setUnit","sales_unit","setSalesUnit","pack_unit","setPackUnit","price","setPrice","hsbn","setHSBN","serial_no","setSerialNo","useEffect","fetchCategory","fetch","method","headers","token","response","ok","json","data","status","category_list","map","item","value","label","error","message","fetchProductData","product_detail","category_id","category_name","handleSubmit","e","submitData","body","formData","window","location","origin","FormData","append","target"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Select from 'react-select';\nimport { url } from 'src/helpers/helpers';\nimport {userContext} from '../../context/UserContext'\nimport { toast,ToastContainer } from 'react-toastify';\nimport {useParams} from 'react-router-dom';\n\nexport default function Edit() {\n    \n    const {id} = useParams();\n    const {user,setLoad} = React.useContext(userContext);\n    const [name,setName] = React.useState('');\n    const [allcategories, setAllCategories] = React.useState([]);\n    const [currentCategory, setCurrentCategory] = React.useState('');\n    const [type, setType] = React.useState('');\n    const [unit, setUnit] = React.useState('');\n    const [sales_unit, setSalesUnit] = React.useState(0);\n    const [pack_unit, setPackUnit]  = React.useState(1);\n    const [price,setPrice] = React.useState(0);\n    const [hsbn,setHSBN] = React.useState('');\n    const [serial_no,setSerialNo] = React.useState('');\n    \n    React.useEffect(()=>{\n        async function fetchCategory(){\n            setLoad(true);\n            const response = await fetch(url + 'categorylist', {\n                method: 'GET',\n                headers: {\n                    'Authorization': user?.token\n                }\n            })\n            if(response.ok === true) {\n                const data = await response.json();\n                setLoad(false)\n                if (data.status === 200) {\n                    setAllCategories(data?.category_list.map(item => {\n                        return {\n                            value: item.id,\n                            label: item.name\n                        }\n                    }))\n                } else {\n                    toast.error(data.message)\n                }\n            }\n        }\n        fetchCategory();\n        \n        async function fetchProductData(){\n                setLoad(true);\n                const response = await fetch(url + 'productById/' + id,{\n                method : 'GET',\n                headers : {\n                    'Authorization' : user?.token\n                }\n            })\n\n            if (response.ok === true){\n                setLoad(false);\n                const data = await response.json();\n                if (data.status === 200){\n                    let product_detail = data.product_detail;\n                    setName(product_detail.name);\n                    setPrice(product_detail.price);\n                    setCurrentCategory({\n                        value: product_detail.category_id,\n                        label: product_detail.category_name\n                    });\n                    setHSBN(product_detail.hsbn);\n                    setSerialNo(product_detail.serial_no);\n                    setType(product_detail.type);\n                    setUnit(product_detail.unit);\n                    setSalesUnit(product_detail.sales_unit);\n                    setPackUnit(product_detail.pack_unit);\n                }else{\n                    toast.error(data.message);\n                }\n            }\n        }\n        fetchProductData();\n    },[])\n\n    const handleSubmit = e => {\n        if(name && price && currentCategory && unit)\n        {  setLoad(true);\n        const formData = new FormData();\n        formData.append('name',name);\n        formData.append('price',price);\n        formData.append('unit',unit);\n        formData.append('type', type);\n        formData.append('hsbn',hsbn);\n        formData.append('serial_no',serial_no);\n        formData.append('category_id',currentCategory.value);\n        formData.append('category_name',currentCategory.label);\n        formData.append('sales_unit',sales_unit);\n        formData.append('pack_unit', pack_unit);\n\n        async function submitData(){\n            const response = await fetch(url + 'updateproduct/' + id,{\n                method : 'POST',\n                headers : {\n                    'Authorization' : user?.token\n                },\n                body : formData\n            })\n            if (response.ok === true){\n                setLoad(false);\n                const data = await response.json();\n                if (data.status === 200){\n                    return window.location = window.location.origin + '/#/productList'\n                }else{\n                    toast.error(data.message);\n                }\n            }\n        }\n        submitData();\n    }else{\n        toast.error('Please fill the data with *');    \n    }\n    }\n    return (\n        <div className=\"container create-page-main-section\">\n            <ToastContainer />\n            <form onSubmit={e=>handleSubmit(e)}>\n                <div className='p-sm-5 create-form-field'>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Name:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={name} onChange={e=>setName(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Category:<span className='required-label'>*</span></label>    \n                        <div class=\"col-sm-10\">\n                        <Select options={allcategories} value={currentCategory} onChange={setCurrentCategory} />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Type:<span className='required-label'>*</span></label>    \n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <select value={type} onChange={e => setType(e.target.value)} class=\"form-control\" required>\n                            <option value=\"\">Select Type</option>\n                            <option value='product'>Product</option>\n                            <option value='service'>Service</option>\n                        </select>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Unit:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <select value={unit} onChange={e => setUnit(e.target.value)} class=\"form-control\" required>\n                            <option value=\"\">Select Unit</option>\n                            <option value='Sq.Ft'>Sq.Ft</option>\n                            <option value='Pcs'>Pcs</option>\n                        </select>\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Sales Unit:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={sales_unit} onChange={e=>setSalesUnit(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                    <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Pack Unit:<span className='required-label'>*</span></label>\n                    <div class=\"d-flex align-items-sm-center col-sm-10\">\n                        <input value={pack_unit} onChange={e=>setPackUnit(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                    </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Price:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={price} onChange={e=>setPrice(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">HSBN:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={hsbn} onChange={e=>setHSBN(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Serial No:<span className='required-label'>*</span></label>\n                        <div class=\"d-flex align-items-sm-center col-sm-10\">\n                            <input value={serial_no} onChange={e=>setSerialNo(e.target.value)} type=\"text\" class=\"form-control\" id=\"inputPassword\" />\n                        </div>\n                    </div>                   \n                </div>\n                <div class=\"d-flex justify-content-center create-catagory-btns\">\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-danger\">Cancel<i\n                        class=\"px-2 fa fa-times\" aria-hidden=\"true\"></i></button>\n                    <button type=\"submit\" class=\"font-weight-bold m-3 py-2 px-4 btn btn-success\">Save<i\n                        class=\"px-2 fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\n                </div>\n            </form>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}